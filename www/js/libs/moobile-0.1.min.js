/*!
 * iScroll v4.1.9 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var r=Math,d=function(m){return m>>0},v=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",w=(/android/gi).test(navigator.appVersion),i=(/iphone|ipad/gi).test(navigator.appVersion),c=(/playbook/gi).test(navigator.appVersion),n=(/hp-tablet/gi).test(navigator.appVersion),k="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),u="ontouchstart" in window&&!n,f=v+"Transform" in document.documentElement.style,g=i||c,o=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),l=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),h="onorientationchange" in window?"orientationchange":"resize",b=u?"touchstart":"mousedown",p=u?"touchmove":"mousemove",e=u?"touchend":"mouseup",t=u?"touchcancel":"mouseup",q=v=="Moz"?"DOMMouseScroll":"mousewheel",a="translate"+(k?"3d(":"("),j=k?",0)":")",s=function(y,m){var z=this,A=document,x;z.wrapper=typeof y=="object"?y:A.getElementById(y);z.wrapper.style.overflow="hidden";z.scroller=z.wrapper.children[0];z.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:w,hideScrollbar:i,fadeScrollbar:i&&k,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(B){B.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(x in m){z.options[x]=m[x]}z.x=z.options.x;z.y=z.options.y;z.options.useTransform=f?z.options.useTransform:false;z.options.hScrollbar=z.options.hScroll&&z.options.hScrollbar;z.options.vScrollbar=z.options.vScroll&&z.options.vScrollbar;z.options.zoom=z.options.useTransform&&z.options.zoom;z.options.useTransition=g&&z.options.useTransition;if(z.options.zoom&&w){a="translate(";j=")"}z.scroller.style[v+"TransitionProperty"]=z.options.useTransform?"-"+v.toLowerCase()+"-transform":"top left";z.scroller.style[v+"TransitionDuration"]="0";z.scroller.style[v+"TransformOrigin"]="0 0";if(z.options.useTransition){z.scroller.style[v+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(z.options.useTransform){z.scroller.style[v+"Transform"]=a+z.x+"px,"+z.y+"px"+j}else{z.scroller.style.cssText+=";position:absolute;top:"+z.y+"px;left:"+z.x+"px"}if(z.options.useTransition){z.options.fixedScrollbar=true}z.refresh();z._bind(h,window);z._bind(b);if(!u){z._bind("mouseout",z.wrapper);if(z.options.wheelAction!="none"){z._bind(q)}}if(z.options.checkDOMChanges){z.checkDOMTime=setInterval(function(){z._checkDOMChanges()},500)}};s.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(x){var m=this;switch(x.type){case b:if(!u&&x.button!==0){return}m._start(x);break;case p:m._move(x);break;case e:case t:m._end(x);break;case h:m._resize();break;case q:m._wheel(x);break;case"mouseout":m._mouseout(x);break;case"webkitTransitionEnd":m._transitionEnd(x);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_scrollbar:function(m){var y=this,z=document,x;if(!y[m+"Scrollbar"]){if(y[m+"ScrollbarWrapper"]){if(f){y[m+"ScrollbarIndicator"].style[v+"Transform"]=""}y[m+"ScrollbarWrapper"].parentNode.removeChild(y[m+"ScrollbarWrapper"]);y[m+"ScrollbarWrapper"]=null;y[m+"ScrollbarIndicator"]=null}return}if(!y[m+"ScrollbarWrapper"]){x=z.createElement("div");if(y.options.scrollbarClass){x.className=y.options.scrollbarClass+m.toUpperCase()}else{x.style.cssText="position:absolute;z-index:100;"+(m=="h"?"height:7px;bottom:1px;left:2px;right:"+(y.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(y.hScrollbar?"7":"2")+"px;top:2px;right:1px")}x.style.cssText+=";pointer-events:none;-"+v+"-transition-property:opacity;-"+v+"-transition-duration:"+(y.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(y.options.hideScrollbar?"0":"1");y.wrapper.appendChild(x);y[m+"ScrollbarWrapper"]=x;x=z.createElement("div");if(!y.options.scrollbarClass){x.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+v+"-background-clip:padding-box;-"+v+"-box-sizing:border-box;"+(m=="h"?"height:100%":"width:100%")+";-"+v+"-border-radius:3px;border-radius:3px"}x.style.cssText+=";pointer-events:none;-"+v+"-transition-property:-"+v+"-transform;-"+v+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+v+"-transition-duration:0;-"+v+"-transform:"+a+"0,0"+j;if(y.options.useTransition){x.style.cssText+=";-"+v+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"}y[m+"ScrollbarWrapper"].appendChild(x);y[m+"ScrollbarIndicator"]=x}if(m=="h"){y.hScrollbarSize=y.hScrollbarWrapper.clientWidth;y.hScrollbarIndicatorSize=r.max(d(y.hScrollbarSize*y.hScrollbarSize/y.scrollerW),8);y.hScrollbarIndicator.style.width=y.hScrollbarIndicatorSize+"px";y.hScrollbarMaxScroll=y.hScrollbarSize-y.hScrollbarIndicatorSize;y.hScrollbarProp=y.hScrollbarMaxScroll/y.maxScrollX}else{y.vScrollbarSize=y.vScrollbarWrapper.clientHeight;y.vScrollbarIndicatorSize=r.max(d(y.vScrollbarSize*y.vScrollbarSize/y.scrollerH),8);y.vScrollbarIndicator.style.height=y.vScrollbarIndicatorSize+"px";y.vScrollbarMaxScroll=y.vScrollbarSize-y.vScrollbarIndicatorSize;y.vScrollbarProp=y.vScrollbarMaxScroll/y.maxScrollY}y._scrollbarPos(m,true)},_resize:function(){var m=this;setTimeout(function(){m.refresh()},w?200:0)},_pos:function(m,z){m=this.hScroll?m:0;z=this.vScroll?z:0;if(this.options.useTransform){this.scroller.style[v+"Transform"]=a+m+"px,"+z+"px"+j+" scale("+this.scale+")"}else{m=d(m);z=d(z);this.scroller.style.left=m+"px";this.scroller.style.top=z+"px"}this.x=m;this.y=z;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(m,z){var y=this,A=m=="h"?y.x:y.y,x;if(!y[m+"Scrollbar"]){return}A=y[m+"ScrollbarProp"]*A;if(A<0){if(!y.options.fixedScrollbar){x=y[m+"ScrollbarIndicatorSize"]+d(A*3);if(x<8){x=8}y[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=x+"px"}A=0}else{if(A>y[m+"ScrollbarMaxScroll"]){if(!y.options.fixedScrollbar){x=y[m+"ScrollbarIndicatorSize"]-d((A-y[m+"ScrollbarMaxScroll"])*3);if(x<8){x=8}y[m+"ScrollbarIndicator"].style[m=="h"?"width":"height"]=x+"px";A=y[m+"ScrollbarMaxScroll"]+(y[m+"ScrollbarIndicatorSize"]-x)}else{A=y[m+"ScrollbarMaxScroll"]}}}y[m+"ScrollbarWrapper"].style[v+"TransitionDelay"]="0";y[m+"ScrollbarWrapper"].style.opacity=z&&y.options.hideScrollbar?"0":"1";y[m+"ScrollbarIndicator"].style[v+"Transform"]=a+(m=="h"?A+"px,0":"0,"+A+"px")+j},_start:function(E){var D=this,z=u?E.touches[0]:E,A,m,F,C,B;if(!D.enabled){return}if(D.options.onBeforeScrollStart){D.options.onBeforeScrollStart.call(D,E)}if(D.options.useTransition||D.options.zoom){D._transitionTime(0)}D.moved=false;D.animating=false;D.zoomed=false;D.distX=0;D.distY=0;D.absDistX=0;D.absDistY=0;D.dirX=0;D.dirY=0;if(D.options.zoom&&u&&E.touches.length>1){C=r.abs(E.touches[0].pageX-E.touches[1].pageX);B=r.abs(E.touches[0].pageY-E.touches[1].pageY);D.touchesDistStart=r.sqrt(C*C+B*B);D.originX=r.abs(E.touches[0].pageX+E.touches[1].pageX-D.wrapperOffsetLeft*2)/2-D.x;D.originY=r.abs(E.touches[0].pageY+E.touches[1].pageY-D.wrapperOffsetTop*2)/2-D.y;if(D.options.onZoomStart){D.options.onZoomStart.call(D,E)}}if(D.options.momentum){if(D.options.useTransform){A=getComputedStyle(D.scroller,null)[v+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=A[4]*1;F=A[5]*1}else{m=getComputedStyle(D.scroller,null).left.replace(/[^0-9-]/g,"")*1;F=getComputedStyle(D.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=D.x||F!=D.y){if(D.options.useTransition){D._unbind("webkitTransitionEnd")}else{l(D.aniTime)}D.steps=[];D._pos(m,F)}}D.absStartX=D.x;D.absStartY=D.y;D.startX=D.x;D.startY=D.y;D.pointX=z.pageX;D.pointY=z.pageY;D.startTime=E.timeStamp||Date.now();if(D.options.onScrollStart){D.options.onScrollStart.call(D,E)}D._bind(p);D._bind(e);D._bind(t)},_move:function(E){var C=this,F=u?E.touches[0]:E,A=F.pageX-C.pointX,y=F.pageY-C.pointY,m=C.x+A,G=C.y+y,B,z,x,D=E.timeStamp||Date.now();if(C.options.onBeforeScrollMove){C.options.onBeforeScrollMove.call(C,E)}if(C.options.zoom&&u&&E.touches.length>1){B=r.abs(E.touches[0].pageX-E.touches[1].pageX);z=r.abs(E.touches[0].pageY-E.touches[1].pageY);C.touchesDist=r.sqrt(B*B+z*z);C.zoomed=true;x=1/C.touchesDistStart*C.touchesDist*this.scale;if(x<C.options.zoomMin){x=0.5*C.options.zoomMin*Math.pow(2,x/C.options.zoomMin)}else{if(x>C.options.zoomMax){x=2*C.options.zoomMax*Math.pow(0.5,C.options.zoomMax/x)}}C.lastScale=x/this.scale;m=this.originX-this.originX*C.lastScale+this.x,G=this.originY-this.originY*C.lastScale+this.y;this.scroller.style[v+"Transform"]=a+m+"px,"+G+"px"+j+" scale("+x+")";if(C.options.onZoom){C.options.onZoom.call(C,E)}return}C.pointX=F.pageX;C.pointY=F.pageY;if(m>0||m<C.maxScrollX){m=C.options.bounce?C.x+(A/2):m>=0||C.maxScrollX>=0?0:C.maxScrollX}if(G>C.minScrollY||G<C.maxScrollY){G=C.options.bounce?C.y+(y/2):G>=C.minScrollY||C.maxScrollY>=0?C.minScrollY:C.maxScrollY}if(C.absDistX<6&&C.absDistY<6){C.distX+=A;C.distY+=y;C.absDistX=r.abs(C.distX);C.absDistY=r.abs(C.distY);return}if(C.options.lockDirection){if(C.absDistX>C.absDistY+5){G=C.y;y=0}else{if(C.absDistY>C.absDistX+5){m=C.x;A=0}}}C.moved=true;C._pos(m,G);C.dirX=A>0?-1:A<0?1:0;C.dirY=y>0?-1:y<0?1:0;if(D-C.startTime>300){C.startTime=D;C.startX=C.x;C.startY=C.y}if(C.options.onScrollMove){C.options.onScrollMove.call(C,E)}},_end:function(E){if(u&&E.touches.length!=0){return}var C=this,K=u?E.changedTouches[0]:E,F,J,y={dist:0,time:0},m={dist:0,time:0},B=(E.timeStamp||Date.now())-C.startTime,G=C.x,D=C.y,I,H,x,A,z;C._unbind(p);C._unbind(e);C._unbind(t);if(C.options.onBeforeScrollEnd){C.options.onBeforeScrollEnd.call(C,E)}if(C.zoomed){z=C.scale*C.lastScale;z=Math.max(C.options.zoomMin,z);z=Math.min(C.options.zoomMax,z);C.lastScale=z/C.scale;C.scale=z;C.x=C.originX-C.originX*C.lastScale+C.x;C.y=C.originY-C.originY*C.lastScale+C.y;C.scroller.style[v+"TransitionDuration"]="200ms";C.scroller.style[v+"Transform"]=a+C.x+"px,"+C.y+"px"+j+" scale("+C.scale+")";C.zoomed=false;C.refresh();if(C.options.onZoomEnd){C.options.onZoomEnd.call(C,E)}return}if(!C.moved){if(u){if(C.doubleTapTimer&&C.options.zoom){clearTimeout(C.doubleTapTimer);C.doubleTapTimer=null;if(C.options.onZoomStart){C.options.onZoomStart.call(C,E)}C.zoom(C.pointX,C.pointY,C.scale==1?C.options.doubleTapZoom:1);if(C.options.onZoomEnd){setTimeout(function(){C.options.onZoomEnd.call(C,E)},200)}}else{C.doubleTapTimer=setTimeout(function(){C.doubleTapTimer=null;F=K.target;while(F.nodeType!=1){F=F.parentNode}if(F.tagName!="SELECT"&&F.tagName!="INPUT"&&F.tagName!="TEXTAREA"){J=document.createEvent("MouseEvents");J.initMouseEvent("click",true,true,E.view,1,K.screenX,K.screenY,K.clientX,K.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,0,null);J._fake=true;F.dispatchEvent(J)}},C.options.zoom?250:0)}}C._resetPos(200);if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}return}if(B<300&&C.options.momentum){y=G?C._momentum(G-C.startX,B,-C.x,C.scrollerW-C.wrapperW+C.x,C.options.bounce?C.wrapperW:0):y;m=D?C._momentum(D-C.startY,B,-C.y,(C.maxScrollY<0?C.scrollerH-C.wrapperH+C.y-C.minScrollY:0),C.options.bounce?C.wrapperH:0):m;G=C.x+y.dist;D=C.y+m.dist;if((C.x>0&&G>0)||(C.x<C.maxScrollX&&G<C.maxScrollX)){y={dist:0,time:0}}if((C.y>C.minScrollY&&D>C.minScrollY)||(C.y<C.maxScrollY&&D<C.maxScrollY)){m={dist:0,time:0}}}if(y.dist||m.dist){x=r.max(r.max(y.time,m.time),10);if(C.options.snap){I=G-C.absStartX;H=D-C.absStartY;if(r.abs(I)<C.options.snapThreshold&&r.abs(H)<C.options.snapThreshold){C.scrollTo(C.absStartX,C.absStartY,200)}else{A=C._snap(G,D);G=A.x;D=A.y;x=r.max(A.time,x)}}C.scrollTo(d(G),d(D),x);if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}return}if(C.options.snap){I=G-C.absStartX;H=D-C.absStartY;if(r.abs(I)<C.options.snapThreshold&&r.abs(H)<C.options.snapThreshold){C.scrollTo(C.absStartX,C.absStartY,200)}else{A=C._snap(C.x,C.y);if(A.x!=C.x||A.y!=C.y){C.scrollTo(A.x,A.y,A.time)}}if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}return}C._resetPos(200);if(C.options.onTouchEnd){C.options.onTouchEnd.call(C,E)}},_resetPos:function(y){var m=this,z=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,x=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(z==m.x&&x==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}}if(m.hScrollbar&&m.options.hideScrollbar){if(v=="webkit"){m.hScrollbarWrapper.style[v+"TransitionDelay"]="300ms"}m.hScrollbarWrapper.style.opacity="0"}if(m.vScrollbar&&m.options.hideScrollbar){if(v=="webkit"){m.vScrollbarWrapper.style[v+"TransitionDelay"]="300ms"}m.vScrollbarWrapper.style.opacity="0"}return}m.scrollTo(z,x,y||0)},_wheel:function(B){var z=this,A,y,x,m,C;if("wheelDeltaX" in B){A=B.wheelDeltaX/12;y=B.wheelDeltaY/12}else{if("detail" in B){A=y=-B.detail*3}else{A=y=-B.wheelDelta}}if(z.options.wheelAction=="zoom"){C=z.scale*Math.pow(2,1/3*(y?y/Math.abs(y):0));if(C<z.options.zoomMin){C=z.options.zoomMin}if(C>z.options.zoomMax){C=z.options.zoomMax}if(C!=z.scale){if(!z.wheelZoomCount&&z.options.onZoomStart){z.options.onZoomStart.call(z,B)}z.wheelZoomCount++;z.zoom(B.pageX,B.pageY,C,400);setTimeout(function(){z.wheelZoomCount--;if(!z.wheelZoomCount&&z.options.onZoomEnd){z.options.onZoomEnd.call(z,B)}},400)}return}x=z.x+A;m=z.y+y;if(x>0){x=0}else{if(x<z.maxScrollX){x=z.maxScrollX}}if(m>z.minScrollY){m=z.minScrollY}else{if(m<z.maxScrollY){m=z.maxScrollY}}z.scrollTo(x,m,0)},_mouseout:function(x){var m=x.relatedTarget;if(!m){this._end(x);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(x)},_transitionEnd:function(x){var m=this;if(x.target!=m.scroller){return}m._unbind("webkitTransitionEnd");m._startAni()},_startAni:function(){var C=this,x=C.x,m=C.y,A=Date.now(),B,z,y;if(C.animating){return}if(!C.steps.length){C._resetPos(400);return}B=C.steps.shift();if(B.x==x&&B.y==m){B.time=0}C.animating=true;C.moved=true;if(C.options.useTransition){C._transitionTime(B.time);C._pos(B.x,B.y);C.animating=false;if(B.time){C._bind("webkitTransitionEnd")}else{C._resetPos(0)}return}y=function(){var D=Date.now(),F,E;if(D>=A+B.time){C._pos(B.x,B.y);C.animating=false;if(C.options.onAnimationEnd){C.options.onAnimationEnd.call(C)}C._startAni();return}D=(D-A)/B.time-1;z=r.sqrt(1-D*D);F=(B.x-x)*z+x;E=(B.y-m)*z+m;C._pos(F,E);if(C.animating){C.aniTime=o(y)}};y()},_transitionTime:function(m){m+="ms";this.scroller.style[v+"TransitionDuration"]=m;if(this.hScrollbar){this.hScrollbarIndicator.style[v+"TransitionDuration"]=m}if(this.vScrollbar){this.vScrollbarIndicator.style[v+"TransitionDuration"]=m}},_momentum:function(D,x,B,m,F){var C=0.0006,y=r.abs(D)/x,z=(y*y)/(2*C),E=0,A=0;if(D>0&&z>B){A=F/(6/(z/y*C));B=B+A;y=y*B/z;z=B}else{if(D<0&&z>m){A=F/(6/(z/y*C));m=m+A;y=y*m/z;z=m}}z=z*(D<0?-1:1);E=y/C;return{dist:z,time:d(E)}},_offset:function(m){var y=-m.offsetLeft,x=-m.offsetTop;while(m=m.offsetParent){y-=m.offsetLeft;x-=m.offsetTop}if(m!=this.wrapper){y*=this.scale;x*=this.scale}return{left:y,top:x}},_snap:function(G,F){var D=this,C,B,E,A,z,m;E=D.pagesX.length-1;for(C=0,B=D.pagesX.length;C<B;C++){if(G>=D.pagesX[C]){E=C;break}}if(E==D.currPageX&&E>0&&D.dirX<0){E--}G=D.pagesX[E];z=r.abs(G-D.pagesX[D.currPageX]);z=z?r.abs(D.x-G)/z*500:0;D.currPageX=E;E=D.pagesY.length-1;for(C=0;C<E;C++){if(F>=D.pagesY[C]){E=C;break}}if(E==D.currPageY&&E>0&&D.dirY<0){E--}F=D.pagesY[E];m=r.abs(F-D.pagesY[D.currPageY]);m=m?r.abs(D.y-F)/m*500:0;D.currPageY=E;A=d(r.max(z,m))||200;return{x:G,y:F,time:A}},_bind:function(y,x,m){(x||this.scroller).addEventListener(y,this,!!m)},_unbind:function(y,x,m){(x||this.scroller).removeEventListener(y,this,!!m)},destroy:function(){var m=this;m.scroller.style[v+"Transform"]="";m.hScrollbar=false;m.vScrollbar=false;m._scrollbar("h");m._scrollbar("v");m._unbind(h,window);m._unbind(b);m._unbind(p);m._unbind(e);m._unbind(t);if(!m.options.hasTouch){m._unbind("mouseout",m.wrapper);m._unbind(q)}if(m.options.useTransition){m._unbind("webkitTransitionEnd")}if(m.options.checkDOMChanges){clearInterval(m.checkDOMTime)}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var z=this,B,y,m,x,C=0,A=0;if(z.scale<z.options.zoomMin){z.scale=z.options.zoomMin}z.wrapperW=z.wrapper.clientWidth||1;z.wrapperH=z.wrapper.clientHeight||1;z.minScrollY=-z.options.topOffset||0;z.scrollerW=d(z.scroller.offsetWidth*z.scale);z.scrollerH=d((z.scroller.offsetHeight+z.minScrollY)*z.scale);z.maxScrollX=z.wrapperW-z.scrollerW;z.maxScrollY=z.wrapperH-z.scrollerH+z.minScrollY;z.dirX=0;z.dirY=0;if(z.options.onRefresh){z.options.onRefresh.call(z)}z.hScroll=z.options.hScroll&&z.maxScrollX<0;z.vScroll=z.options.vScroll&&(!z.options.bounceLock&&!z.hScroll||z.scrollerH>z.wrapperH);z.hScrollbar=z.hScroll&&z.options.hScrollbar;z.vScrollbar=z.vScroll&&z.options.vScrollbar&&z.scrollerH>z.wrapperH;B=z._offset(z.wrapper);z.wrapperOffsetLeft=-B.left;z.wrapperOffsetTop=-B.top;if(typeof z.options.snap=="string"){z.pagesX=[];z.pagesY=[];x=z.scroller.querySelectorAll(z.options.snap);for(y=0,m=x.length;y<m;y++){C=z._offset(x[y]);C.left+=z.wrapperOffsetLeft;C.top+=z.wrapperOffsetTop;z.pagesX[y]=C.left<z.maxScrollX?z.maxScrollX:C.left*z.scale;z.pagesY[y]=C.top<z.maxScrollY?z.maxScrollY:C.top*z.scale}}else{if(z.options.snap){z.pagesX=[];while(C>=z.maxScrollX){z.pagesX[A]=C;C=C-z.wrapperW;A++}if(z.maxScrollX%z.wrapperW){z.pagesX[z.pagesX.length]=z.maxScrollX-z.pagesX[z.pagesX.length-1]+z.pagesX[z.pagesX.length-1]}C=0;A=0;z.pagesY=[];while(C>=z.maxScrollY){z.pagesY[A]=C;C=C-z.wrapperH;A++}if(z.maxScrollY%z.wrapperH){z.pagesY[z.pagesY.length]=z.maxScrollY-z.pagesY[z.pagesY.length-1]+z.pagesY[z.pagesY.length-1]}}}z._scrollbar("h");z._scrollbar("v");if(!z.zoomed){z.scroller.style[v+"TransitionDuration"]="0";z._resetPos(200)}},scrollTo:function(m,F,E,D){var C=this,B=m,A,z;C.stop();if(!B.length){B=[{x:m,y:F,time:E,relative:D}]}for(A=0,z=B.length;A<z;A++){if(B[A].relative){B[A].x=C.x-B[A].x;B[A].y=C.y-B[A].y}C.steps.push({x:B[A].x,y:B[A].y,time:B[A].time||0})}C._startAni()},scrollToElement:function(m,y){var x=this,z;m=m.nodeType?m:x.scroller.querySelector(m);if(!m){return}z=x._offset(m);z.left+=x.wrapperOffsetLeft;z.top+=x.wrapperOffsetTop;z.left=z.left>0?0:z.left<x.maxScrollX?x.maxScrollX:z.left;z.top=z.top>x.minScrollY?x.minScrollY:z.top<x.maxScrollY?x.maxScrollY:z.top;y=y===undefined?r.max(r.abs(z.left)*2,r.abs(z.top)*2):y;x.scrollTo(z.left,z.top,y)},scrollToPage:function(A,z,C){var B=this,m,D;C=C===undefined?400:C;if(B.options.onScrollStart){B.options.onScrollStart.call(B)}if(B.options.snap){A=A=="next"?B.currPageX+1:A=="prev"?B.currPageX-1:A;z=z=="next"?B.currPageY+1:z=="prev"?B.currPageY-1:z;A=A<0?0:A>B.pagesX.length-1?B.pagesX.length-1:A;z=z<0?0:z>B.pagesY.length-1?B.pagesY.length-1:z;B.currPageX=A;B.currPageY=z;m=B.pagesX[A];D=B.pagesY[z]}else{m=-B.wrapperW*A;D=-B.wrapperH*z;if(m<B.maxScrollX){m=B.maxScrollX}if(D<B.maxScrollY){D=B.maxScrollY}}B.scrollTo(m,D,C)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(p);this._unbind(e);this._unbind(t)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind("webkitTransitionEnd")}else{l(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},zoom:function(m,D,C,B){var z=this,A=C/z.scale;if(!z.options.useTransform){return}z.zoomed=true;B=B===undefined?200:B;m=m-z.wrapperOffsetLeft-z.x;D=D-z.wrapperOffsetTop-z.y;z.x=m-m*A+z.x;z.y=D-D*A+z.y;z.scale=C;z.refresh();z.x=z.x>0?0:z.x<z.maxScrollX?z.maxScrollX:z.x;z.y=z.y>z.minScrollY?z.minScrollY:z.y<z.maxScrollY?z.maxScrollY:z.y;z.scroller.style[v+"TransitionDuration"]=B+"ms";z.scroller.style[v+"Transform"]=a+z.x+"px,"+z.y+"px"+j+" scale("+C+")";z.zoomed=false},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined"){exports.iScroll=s}else{window.iScroll=s}})();Class.Binds=new Class({$bound:{},bound:function(a){return this.$bound[a]?this.$bound[a]:this.$bound[a]=this[a].bind(this)}});if(!window.Moobile){window.Moobile={}}(function(){var a=Events.prototype.fireEvent;Moobile.EventFirer=new Class({Implements:[Events,Options,Class.Binds],fireEvent:function(d,c,b){c=Array.from(c).include(this);if(!this.shouldFireEvent(d,c)){return this}this.willFireEvent(d,c);a.call(this,d,c,b);this.didFireEvent(d,c);return this},shouldFireEvent:function(c,b){return true},willFireEvent:function(c,b){},didFireEvent:function(c,b){}})})();if(!window.Moobile){window.Moobile={}}Moobile.Animation=new Class({Extends:Moobile.EventFirer,_name:null,_running:false,element:null,animationClass:null,animationProperties:{name:null,duration:null,"iteration-count":null,"animation-direction":null,"animation-timing-function":null,"animation-fill-mode":null,"animation-delay":null},initialize:function(b,a){this.setElement(b);this.setOptions(a);return this},setName:function(a){this._name=a;return this},getName:function(){return this._name},setElement:function(a){this.element=document.id(a);return this},getElement:function(){return this.element},setAnimationClass:function(a){this.animationClass=a;return this},getAnimationClass:function(){return this.animationClass},setAnimationName:function(a){this.animationProperties.name=a;return this},getAnimationName:function(){return this.animationProperties.name},setAnimationDuration:function(a){this.animationProperties.duration=a;return this},getAnimationDuration:function(){return this.animationProperties.duration},setAnimationIterationCount:function(a){this.animationProperties["iteration-count"]=a;return this},getAnimationIterationCount:function(){return this.animationProperties["iteration-count"]},setAnimationDirection:function(a){this.animationProperties.direction=a;return this},getAnimationDirection:function(){return this.animationProperties.direction},setAnimationTimingFunction:function(a){this.animationProperties["timing-function"]=a;return this},getAnimationTimingFunction:function(){return this.animationProperties["timing-function"]},setAnimationFillMode:function(a){this.animationProperties["fill-mode"]=a;return this},getAnimationFillMode:function(){return this.animationProperties["fill-mode"]},setAnimationDelay:function(a){this.animationProperties.delay=a;return this},getAnimationDelay:function(){return this.animationProperties.delay},attach:function(){this.element.addEvent("animationend",this.bound("onAnimationEnd"));this.element.addClass(this.animationClass);Object.each(this.animationProperties,function(b,a){this.element.setStyle("-webkit-animation-"+a,b)},this);return this},detach:function(){this.element.removeEvent("animationend",this.bound("onAnimationEnd"));this.element.removeClass(this.animationClass);Object.each(this.animationProperties,function(b,a){this.element.setStyle("-webkit-animation-"+a,null)},this);return this},start:function(){if(this._running){return this}this._running=true;this.fireEvent("start");this.attach();return this},stop:function(){if(this._running===false){return this}this._running=false;this.detach();this.fireEvent("stop");return this},isRunning:function(){return this._running},onAnimationEnd:function(a){if(this._running===false){return}if(this.element!==a.target){return}a.stop();this._running=false;this.detach();this.fireEvent("end")}});Moobile.Animation.Set=new Class({Extends:Moobile.Animation,element:null,animations:[],currentAnimation:null,initialize:function(b,a){this.parent(b,a);delete this.animationClass;delete this.animationProperties;return this},setAnimation:function(a,b){b.setName(a);b.setOptions(this.options);this.removeAnimation(a);b.addEvent("start",this.bound("onAnimationStart"));b.addEvent("stop",this.bound("onAnimationStop"));b.addEvent("end",this.bound("onAnimationEnd"));if(this.element){b.setElement(this.element)}this.animations.include(b);return this},getAnimation:function(a){return this.animations.find(function(b){return b.getName()===a})},removeAnimation:function(a){var b=this.getAnimation(a);if(b){b.cancel();b.removeEvent("start",this.bound("onAnimationStart"));b.removeEvent("stop",this.bound("onAnimationStop"));b.removeEvent("end",this.bound("onAnimationEnd"));if(this.currentAnimation===b){this.currentAnimation=null}this.animations.erase(b);b=null}return this},setElement:function(a){this.element=document.id(a);this.animations.invoke("setElement",this.element);return this},getElement:function(){return this.animations.invoke("getElement")},setAnimationClass:function(a){this.animations.invoke("setAnimationClass",a);return this},getAnimationClass:function(){return this.animations.invoke("getAnimationClass")},setAnimationName:function(a){this.animations.invoke("setAnimationName",a);return this},getAnimationName:function(){return this.animations.invoke("getAnimationName")},setAnimationDuration:function(a){this.animations.invoke("setAnimationDuration",a);return this},getAnimationDuration:function(){return this.animations.invoke("getAnimationDuration")},setAnimationIterationCount:function(a){this.animations.invoke("setAnimationIterationCount",a);return this},getAnimationIterationCount:function(){return this.animations.invoke("getAnimationIterationCount")},setAnimationDirection:function(a){this.animations.invoke("setAnimationDirection",a);return this},getAnimationDirection:function(){return this.animations.invoke("getAnimationDirection")},setAnimationTimingFunction:function(a){this.animations.invoke("setAnimationTimingFunction",a);return this},getAnimationTimingFunction:function(){return this.animations.invoke("getAnimationTimingFunction")},setAnimationFillMode:function(a){this.animations.invoke("setAnimationFillMode",a);return this},getAnimationFillMode:function(){return this.animations.invoke("getAnimationFillMode")},setAnimationDelay:function(a){this.animations.invoke("setAnimationDelay",a);return this},getAnimationDelay:function(){return this.animations.invoke("getAnimationDelay")},attach:function(){this.animations.invoke("attach");return this},detach:function(){this.animations.invoke("detach");return this},start:function(a){this.stop();var b=this.getAnimation(a);if(b){this.currentAnimation=b;this.currentAnimation.start()}return this},stop:function(){if(this.currentAnimation){this.currentAnimation.stop();this.currentAnimation=null}return this},isRunning:function(){return this.animations.some(function(a){return a.isRunning()})},onAnimationStart:function(){this.fireEvent("start",this.currentAnimation)},onAnimationStop:function(){this.fireEvent("stop",this.currentAnimation)},onAnimationEnd:function(){this.fireEvent("end",this.currentAnimation);this.currentAnimation=null},});(function(){Browser.Device={name:"other"};if(Browser.Platform.ios){var a=navigator.userAgent.toLowerCase().match(/(ip(ad|od|hone))/)[0];Browser.Device[a]=true;Browser.Device.name=a}if(this.devicePixelRatio==2){Browser.hasHighResolution=true}Browser.isMobile=!["mac","linux","win"].contains(Browser.Platform.name)}).call(this);Browser.Features.Touch=(function(){try{document.createEvent("TouchEvent").initTouchEvent("touchstart");return true}catch(a){}return false})();Browser.Features.iOSTouch=(function(){var a="cantouch",c=document.html,f=false;if(!c.addEventListener){return false}var d=function(){c.removeEventListener(a,d,true);f=true};try{c.addEventListener(a,d,true);var e=document.createEvent("TouchEvent");e.initTouchEvent(a);c.dispatchEvent(e);return f}catch(b){}d();return false})();Browser.Platform.cordova=window.Cordova&&Browser.isMobile&&!Browser.safari;Class.extend({parse:function(a){a=a.trim();a=a.split(".");var c=window;for(var b=0;b<a.length;b++){if(c[a[b]]){c=c[a[b]]}else{return null}}return typeof c==="function"?c:null},instantiate:function(b){if(typeof b==="string"){b=Class.parse(b)}if(b===null){return null}b.$prototyping=true;var a=new b;delete b.$prototyping;var c=Array.prototype.slice.call(arguments,1);if(a.initialize){a.initialize.apply(a,c)}return a}});(function(){var a=Element.prototype.adopt;Element.implement({ingest:function(b){return this.adopt(Array.from(document.id(b).childNodes))},adopt:function(){if(arguments.length===1){var b=arguments[0];if(typeof b==="string"){var c=Elements.from(b);if(c.length){return a.apply(this,c)}}}return a.apply(this,arguments)}})})();(function(){Element.from=function(b){switch(typeof b){case"object":return document.id(b);case"string":return Elements.from(b).pop()}return null};var a={};Element.at=function(e,d,c){var b=a[e];if(b){var f=b.clone(true,true);if(c){c(f)}return f}d=d||false;new Moobile.Request({method:"get",async:d,url:e}).addEvent("success",function(g){b=Element.from(g);if(c){c(b.clone(true,true))}}).addEvent("failure",function(g){if(c){c(null)}}).send();if(b){a[e]=b}return !d?b.clone(true,true):null}})();(function(){Element.defineRole=function(a,b,c){b=(b||Element).prototype;if(b.__roles__===undefined){b.__roles__={}}if(c instanceof Function){c={behavior:c}}b.__roles__[a]=Object.append({traversable:false},c)};Element.implement({setRole:function(a){return this.set("data-role",a)},getRole:function(a){return this.get("data-role")},getRoleDefinition:function(a){return(a||this).__roles__?(a||this).__roles__[this.getRole()]:null},getRoleElement:function(a){return this.getRoleElements(a)[0]||null},getRoleElements:function(c){var b=this.ownsRoleElement.bind(this);var a=c?"[data-role="+c+"]":"[data-role]";return this.getElements(a).filter(b)},ownsRoleElement:function(a){var b=a.getParent();if(b){if(b===this){return true}if(b.get("data-role")){return false}return this.ownsRoleElement(b)}return false},executeDefinedRoles:function(a){a=a||this;this.getRoleElements().each(function(b){var d=b.getRoleDefinition(a);if(d){var c=d.behavior;if(c instanceof Function){c.call(a,b)}if(d.traversable){b.executeDefinedRoles(a)}}else{throw new Error("Role "+b.getRole()+" is undefined")}},this);return this}})})();Moobile.Component=new Class({Extends:Moobile.EventFirer,_name:null,_window:null,_parent:null,_children:[],_visible:true,_ready:false,_style:null,element:null,options:{className:null,styleName:null,tagName:"div"},initialize:function(c,b,a){this.element=Element.from(c);if(this.element===null){this.element=new Element(this.options.tagName)}this._name=a||this.element.get("data-name");b=b||{};for(var d in this.options){if(b[d]!==undefined){break}var f=d.hyphenate();var e=this.element.get("data-option-"+f);if(e!=null){if(e==="null"){e=null}else{if(e==="false"){e=false}else{if(e==="true"){e=true}else{if(/^-{0,1}\d*\.{0,1}\d+$/.test(e)){e=Number(e)}}}}b[d]=e}}this.setOptions(b);this.willBuild();this.build();this.didBuild();return this},build:function(){var b=this.options.className;if(b){this.addClass(b)}var a=this.options.styleName;if(a){this.setStyle(a)}this.element.executeDefinedRoles(this)},addEvent:function(c,b,a){if(Moobile.Component.hasNativeEvent(c)){this.element.addEvent(c,function(d){this.fireEvent(c,d)}.bind(this),a)}return this.parent(c,b,a)},addChildComponent:function(b,a){var c=function(){var d=b.getElement();if(d){if(this.hasElement(d)===false){this.element.grab(d,a)}}};return this._addChildComponentAt(b,a==="top"?0:this._children.length,c)},addChildComponentInside:function(b,d,a){var c=function(){var e=b.getElement();if(e){d=document.id(d)||this.getElement(d);if(this.hasElement(e)===false&&this.hasElement(d)===true){d.grab(e,a)}}};return this._addChildComponentAt(b,this._children.length,c)},addChildComponentAfter:function(b,d){var a=this._children.length;if(d instanceof Moobile.Component){a=this.getChildComponentIndex(d)+1}var c=function(){var f=b.getElement();if(f){var e=document.id(d);if(e){if(this.hasElement(f)===false&&this.hasElement(e)===true){f.inject(e,"after")}}}};return this._addChildComponentAt(b,a,c)},addChildComponentBefore:function(b,d){var a=this._children.length;if(d instanceof Moobile.Component){a=this.getChildComponentIndex(d)}var c=function(){var f=b.getElement();if(f){var e=document.id(d);if(e){if(this.hasElement(f)===false&&this.hasElement(e)===true){f.inject(e,"before")}}}};return this._addChildComponentAt(b,a,c)},_addChildComponentAt:function(c,b,e){c.removeFromParentComponent();this.willAddChildComponent(c);this._children.splice(b,0,c);if(e){e.call(this)}var a=c.getParentComponent();if(a===null){c.setParentComponent(this)}this.didAddChildComponent(c);var d=c.getWindow();if(d===null){c.setWindow(this._window)}return this},getChildComponent:function(a){return this._children.find(function(b){return b.getName()===a})},getChildComponentOfType:function(b,a){return this._children.find(function(c){return c instanceof b&&c.getName()===a})},getChildComponentAt:function(a){return this._children[a]||null},getChildComponentOfTypeAt:function(b,a){return this.getChildComponentsOfType(b)[a]||null},getChildComponentIndex:function(a){return this._children.indexOf(a)},getChildComponents:function(){return this._children},getChildComponentsOfType:function(a){return this._children.filter(function(b){return b instanceof a})},hasChildComponent:function(a){return this._children.contains(a)},hasChildComponentOfType:function(a){return this._children.some(function(b){return b instanceof a})},replaceChildComponent:function(a,c,b){return this.addChildComponentBefore(c,a).removeChildComponent(a,b)},replaceWithComponent:function(a,b){var c=this.getParentComponent();if(c){c.replaceChildComponent(this,a,b)}return this},removeChildComponent:function(a,c){if(!this.hasChildComponent(a)){return this}this.willRemoveChildComponent(a);a.setParentComponent(null);a.setWindow(null);a.setReady(false);var b=a.getElement();if(b){b.dispose()}this._children.erase(a);this.didRemoveChildComponent(a);if(c){a.destroy();a=null}return this},removeAllChildComponents:function(a){return this.removeAllChildComponentsOfType(Moobile.Component,a)},removeAllChildComponentsOfType:function(b,a){this._children.filter(function(c){return c instanceof b}).invoke("removeFromParent",a);return this},removeFromParentComponent:function(a){var b=this.getParentComponent();if(b){b.removeChildComponent(this,a)}return this},setParentComponent:function(a){if(this._parent===a){return this}this.parentComponentWillChange(a);this._parent=a;this.parentComponentDidChange(a);return this},getParentComponent:function(){return this._parent},hasParentComponent:function(){return !!this._parent},setWindow:function(a){if(this._window===a){return this}this._window=a;this._children.invoke("setWindow",a);if(this._window){this.setReady(true)}return this},getWindow:function(){return this._window},hasWindow:function(){return !!this._window},setReady:function(a){if(this._ready===a){return this}this._ready=a;this._children.invoke("setReady",a);if(this._ready){this.didBecomeReady();this.fireEvent("ready")}return this},isReady:function(){return this._ready},getName:function(){return this._name},setStyle:function(a){if(this._style){this._style.detach.call(this,this.element);this._style=null}var b=Moobile.Component.getStyle(a,this);if(b){b.attach.call(this,this.element)}this._style=b;return this},getStyle:function(){return this._style?this._style.name:null},addClass:function(a){this.element.addClass(a);return this},removeClass:function(a){this.element.removeClass(a);return this},toggleClass:function(a){this.element.toggleClass(a);return this},getElement:function(a){return a?this.element.getElement(a):this.element},getElements:function(a){return this.element.getElements(a||"*")},hasElement:function(a){return this.element===document.id(a)||this.element.contains(document.id(a))},getSize:function(){return this.element.getSize()},getPosition:function(a){return this.element.getPosition(document.id(a)||this._parent)},show:function(){if(this._visible){return this}this.willShow();this._visible=true;this.element.show();this.element.removeClass("hidden");this.didShow();return this.fireEvent("show")},hide:function(){if(this._visible===false){return this}this.willHide();this._visible=false;this.element.hide();this.element.addClass("hidden");this.didHide();return this.fireEvent("hide")},isVisible:function(){return this._visible},willBuild:function(){},didBuild:function(){},didBecomeReady:function(){},willAddChildComponent:function(a){},didAddChildComponent:function(a){},willRemoveChildComponent:function(a){},didRemoveChildComponent:function(a){},parentComponentWillChange:function(a){},parentComponentDidChange:function(a){},willShow:function(){},didShow:function(){},willHide:function(){},didHide:function(){},destroy:function(){this.removeFromParentComponent();this.removeAllChildComponents(true);this.element.destroy();this.element=null;this._window=null;this._parent=null;return this},toElement:function(){return this.element}});Moobile.Component.defineRole=function(a,c,b){Element.defineRole(a,c||Moobile.Component,b)};Moobile.Component.defineStyle=function(a,d,c){var b=(d||Moobile.Component).prototype;if(b.__styles__===undefined){b.__styles__={}}b.__styles__[a]=Object.append({name:a,attach:function(){},detach:function(){}},c)};Moobile.Component.getStyle=function(a,b){return b.__styles__?b.__styles__[a]:null};Moobile.Component.create=function(b,d,e){d=Element.from(d);if(e){var c=d.get(e);if(c){var a=Class.instantiate(c,d);if(a instanceof b){return a}}}return new b(d)};(function(){var a=Object.keys(Element.NativeEvents);Moobile.Component.addNativeEvent=function(b){a.include(b)};Moobile.Component.hasNativeEvent=function(b){return a.contains(b)};Moobile.Component.removeNativeEvent=function(b){a.erase(b)};Moobile.Component.addNativeEvent("tapstart");Moobile.Component.addNativeEvent("tapmove");Moobile.Component.addNativeEvent("tapend");Moobile.Component.addNativeEvent("tap");Moobile.Component.addNativeEvent("pinch");Moobile.Component.addNativeEvent("swipe");Moobile.Component.addNativeEvent("animationend");Moobile.Component.addNativeEvent("transitionend")})();Moobile.Component.prototype.addChild=Moobile.Component.prototype.addChildComponent;Moobile.Component.prototype.addChildInside=Moobile.Component.prototype.addChildComponentInside;Moobile.Component.prototype.addChildAfter=Moobile.Component.prototype.addChildComponentAfter;Moobile.Component.prototype.addChildBefore=Moobile.Component.prototype.addChildComponentBefore;Moobile.Component.prototype.getChild=Moobile.Component.prototype.getChildComponent;Moobile.Component.prototype.getChildOfType=Moobile.Component.prototype.getChildComponentOfType;Moobile.Component.prototype.getChildAt=Moobile.Component.prototype.getChildComponentAt;Moobile.Component.prototype.getChildOfTypeAt=Moobile.Component.prototype.getChildComponentOfTypeAt;Moobile.Component.prototype.getChildIndex=Moobile.Component.prototype.getChildComponentIndex;Moobile.Component.prototype.getChildren=Moobile.Component.prototype.getChildComponents;Moobile.Component.prototype.getChildrenOfType=Moobile.Component.prototype.getChildComponentsOfType;Moobile.Component.prototype.hasChild=Moobile.Component.prototype.hasChildComponent;Moobile.Component.prototype.hasChildOfType=Moobile.Component.prototype.hasChildComponentOfType;Moobile.Component.prototype.replaceChild=Moobile.Component.prototype.replaceChildComponent;Moobile.Component.prototype.replaceWith=Moobile.Component.prototype.replaceWithComponent;Moobile.Component.prototype.removeChild=Moobile.Component.prototype.removeChildComponent;Moobile.Component.prototype.removeChildren=Moobile.Component.prototype.removeAllChildComponents;Moobile.Component.prototype.removeChildrenOfType=Moobile.Component.prototype.removeAllChildComponentsOfType;Moobile.Component.prototype.removeFromParent=Moobile.Component.prototype.removeFromParentComponent;Moobile.Component.prototype.setParent=Moobile.Component.prototype.setParentComponent;Moobile.Component.prototype.getParent=Moobile.Component.prototype.getParentComponent;Moobile.Component.prototype.hasParent=Moobile.Component.prototype.hasParentComponent;Moobile.Component.prototype.willAddChild=function(){throw new Error('This method is deprecated, use "willAddChildComponent" instead')};Moobile.Component.prototype.didAddChild=function(){throw new Error('This method is deprecated, use "didAddChildComponent" instead')};Moobile.Component.prototype.willRemoveChild=function(){throw new Error('This method is deprecated, use "willRemoveChildComponent" instead')};Moobile.Component.prototype.didRemoveChild=function(){throw new Error('This method is deprecated, use "didRemoveChildComponent" instead')};Moobile.Component.prototype.parentWillChange=function(){throw new Error('This method is deprecated, use "parentComponentWillChange" instead')};Moobile.Component.prototype.parentDidChange=function(){throw new Error('This method is deprecated, use "parentComponentDidChange" instead')};Moobile.Control=new Class({Extends:Moobile.Component,_state:null,options:{className:null,styleName:null},_setState:function(b,a){if(this._state===b){return this}if(this.shouldAllowState(b)||b==null){this.willChangeState(b);if(this._state){this.removeClass("is-"+this._state)}this._state=b;if(this._state){this.addClass("is-"+this._state)}this.didChangeState(b)}return this},_getState:function(){return this._state},shouldAllowState:function(a){return["highlighted","selected","disabled"].contains(a)},setDisabled:function(a){return this._setState(a?"disabled":null)},isDisabled:function(){return this._getState()=="disabled"},setSelected:function(a){return this._setState(a?"selected":null)},isSelected:function(){return this._getState()=="selected"},setHighlighted:function(a){return this._setState(a?"highlighted":null)},isHighlighted:function(){return this._getState()=="highlighted"},willChangeState:function(a){},didChangeState:function(a){},shouldFireEvent:function(b,a){return !this.isDisabled()}});Moobile.Button=new Class({Extends:Moobile.Control,_label:null,willBuild:function(){this.parent();this.element.addClass("button");var a=this.element.getRoleElement("label");if(a===null){a=new Element("div");a.ingest(this.element);a.inject(this.element);a.setRole("label")}this.addEvent("tapstart",this.bound("_onTapStart"));this.addEvent("tapend",this.bound("_onTapEnd"))},destroy:function(){this.removeEvent("tapstart",this.bound("_onTapStart"));this.removeEvent("tapend",this.bound("_onTapEnd"));this.label=null;this.parent()},setLabel:function(a){if(this._label===a){return this}if(typeof a==="string"){a=new Moobile.Text().setText(a)}if(this._label){this._label.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._label=a;this._label.addClass("button-label");return this},getLabel:function(){return this._label},_onTapStart:function(a){if(!this.isSelected()){this.setHighlighted(true)}},_onTapEnd:function(a){if(!this.isSelected()){this.setHighlighted(false)}}});Moobile.Component.defineRole("button",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Button,a,"data-button"))});Moobile.Component.defineRole("label",Moobile.Button,function(a){this.setLabel(Moobile.Component.create(Moobile.Text,a,"data-label"))});Moobile.Component.defineStyle("active",Moobile.Button,{attach:function(a){a.addClass("style-active")},detach:function(a){a.removeClass("style-active")}});Moobile.Component.defineStyle("warning",Moobile.Button,{attach:function(a){a.addClass("style-warning")},detach:function(a){a.removeClass("style-warning")}});Moobile.Component.defineStyle("back",Moobile.Button,{attach:function(a){a.addClass("style-back")},detach:function(a){a.removeClass("style-back")}});Moobile.Component.defineStyle("forward",Moobile.Button,{attach:function(a){a.addClass("style-forward")},detach:function(a){a.removeClass("style-forward")}});Moobile.ButtonGroup=new Class({Extends:Moobile.Control,_selectedButton:null,_selectedButtonIndex:-1,options:{deselectable:false,selectedButtonIndex:-1},willBuild:function(){this.parent();this.element.addClass("button-group")},didBuild:function(){this.parent();this.setSelectedButtonIndex(this.options.selectedButtonIndex)},destroy:function(){this._selectedButton=null;this._selectedButtonIndex=-1;this.parent()},setSelectedButton:function(a){if(this._selectedButton===a){if(a&&this.options.deselectable){a=null}else{return this}}if(this._selectedButton){this.fireEvent("deselect",this._selectedButton);this._selectedButton.setSelected(false);this._selectedButton=null}if(a){this._selectedButton=a;this._selectedButton.setSelected(true);this.fireEvent("select",this._selectedButton)}this._selectedButtonIndex=a?this.getChildComponentIndex(a):-1;return this},getSelectedButton:function(){return this._selectedButton},setSelectedButtonIndex:function(a){var b=null;if(a>=0){b=this.getChildComponentOfTypeAt(Moobile.Button,a)}return this.setSelectedButton(b)},getSelectedButtonIndex:function(){return this._selectedButtonIndex},clearSelectedButton:function(){this.setSelectedButton(null);return this},addButton:function(b,a){return this.addChildComponent(b,a)},addButtonAfter:function(a,b){return this.addChildComponentAfter(a,b)},addButtonBefore:function(a,b){return this.addChildComponentBefore(a,b)},getButtons:function(){return this.getChildComponentsOfType(Moobile.Button)},getButton:function(a){return this.getChildComponentOfType(Moobile.Button,a)},getButtonAt:function(a){return this.getChildComponentOfTypeAt(Moobile.Button,a)},removeButton:function(b,a){return this.removeChildComponent(b,a)},removeAllButtons:function(a){return this.removeAllChildComponentsOfType(Moobile.Button,a)},didAddChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.addEvent("tap",this.bound("onButtonTap"))}},didRemoveChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.removeEvent("tap",this.bound("onButtonTap"))}},onButtonTap:function(b,a){this.setSelectedButton(a)}});Moobile.Component.defineRole("button-group",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ButtonGroup,a,"data-button-group"))});Moobile.Component.defineStyle("vertical",Moobile.ButtonGroup,{attach:function(a){a.addClass("style-vertical")},detach:function(a){a.removeClass("style-vertical")}});Moobile.Bar=new Class({Extends:Moobile.Control,_item:null,willBuild:function(){this.parent();this.element.addClass("bar");var a=this.element.getRoleElement("item");if(a===null){a=new Element("div");a.ingest(this.element);a.inject(this.element);a.setRole("item")}},destroy:function(){this._item=null;this.parent()},setItem:function(a){if(this._item===a){return this}if(this._item){this._item.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._item=a;this._item.addClass("bar-item");return this},getItem:function(){return this._item}});Moobile.Component.defineRole("bar",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Bar,a,"data-bar"))});Moobile.Component.defineStyle("dark",Moobile.Bar,{attach:function(a){a.addClass("style-dark")},detach:function(a){a.removeClass("style-dark")}});Moobile.BarItem=new Class({Extends:Moobile.Control,willBuild:function(){this.parent();this.element.addClass("bar-item")}});Moobile.Component.defineRole("item",Moobile.Bar,function(a){this.setItem(Moobile.Component.create(Moobile.BarItem,a,"data-item"))});Moobile.NavigationBar=new Class({Extends:Moobile.Bar,willBuild:function(){this.parent();this.element.addClass("navigation-bar")}});Moobile.Component.defineRole("navigation-bar",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.NavigationBar,a,"data-navigation-bar"))});Moobile.NavigationBarItem=new Class({Extends:Moobile.BarItem,_title:null,willBuild:function(){this.parent();this.element.addClass("navigation-bar-item");var a=this.element.getRoleElement("title");if(a===null){a=new Element("div");a.ingest(this.element);a.inject(this.element);a.setRole("title")}var b=this.element.getElement(".bar-title");if(b==null){b=new Element("div.bar-title");b.wraps(a)}},destroy:function(){this._title=null;this.parent()},setTitle:function(a){if(this._title===a){return this}if(typeof a==="string"){a=new Moobile.Text().setText(a)}if(this._title){this._title.replaceWithComponent(a,true)}else{this.addChildComponentInside(a,null,".bar-title")}this._title=a;this._title.addClass("title");return this},getTitle:function(){return this._title},addLeftButton:function(a){return this.addChildComponent(a,"top")},addRightButton:function(a){return this.addChildComponent(a,"bottom")},getButton:function(a){return this.getChildComponentOfType(Moobile.Button,a)},getButtonAt:function(a){return this.getChildComponentOfTypeAt(Moobile.Button,a)},removeButton:function(b,a){return this.removeChildComponent(b,a)},removeAllButtons:function(a){return this.removeAllChildComponents(Moobile.Button,a)}});Moobile.Component.defineRole("item",Moobile.NavigationBar,function(a){this.setItem(Moobile.Component.create(Moobile.NavigationBarItem,a,"data-item"))});Moobile.Component.defineRole("title",Moobile.NavigationBarItem,function(a){this.setTitle(Moobile.Component.create(Moobile.Text,a,"data-title"))});Class.refactor(Slider,{draggedKnob:function(){this.fireEvent("move",this.drag.value.now[this.axis]);this.previous()}});Moobile.Slider=new Class({Extends:Moobile.Control,_value:0,slider:null,trackElement:null,thumbElement:null,options:{snap:false,mode:"horizontal",min:0,max:100,background:true,backgroundSize:2048,value:0},willBuild:function(){this.parent();this.element.addClass("slider");this.thumbElement=new Element("div.slider-thumb");this.trackElement=new Element("div.slider-track");this.trackElement.grab(this.thumbElement);this.element.empty();this.element.grab(this.trackElement)},didBecomeReady:function(){this.parent();var a={snap:this.options.snap,steps:this.options.max-this.options.min,range:[this.options.min,this.options.max],mode:this.options.mode};this.slider=new Slider(this.trackElement,this.thumbElement,a);this.slider.addEvent("move",this.bound("_onMove"));this.slider.addEvent("tick",this.bound("_onTick"));this.slider.addEvent("change",this.bound("_onChange"));this.setValue(this.options.value)},destroy:function(){this.thumbElement=null;this.trackElement=null;this.slider=null;this.parent()},setValue:function(a){this.slider.set(this._value=a);return this},getValue:function(){return this._value},_updateTrack:function(a){this.trackElement.setStyle("background-position",(-this.options.backgroundSize/2)+(a+this.thumbElement.getSize().x/2))},_onMove:function(a){this._updateTrack(a);this.fireEvent("move",a)},_onTick:function(a){this._updateTrack(a);this.fireEvent("tick",a)},_onChange:function(a){this._value=a;this._updateTrack(this.slider.toPosition(a));this.fireEvent("change",a)}});Moobile.Component.defineRole("slider",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Slider,a,"data-slider"))});Moobile.List=new Class({Extends:Moobile.Control,_selectable:true,_selectedItem:null,_selectedItemIndex:-1,options:{tagName:"ul",selectable:true,selectedItemIndex:-1},willBuild:function(){this.parent();this.element.addClass("list")},didBuild:function(){this.parent();this.setSelectable(this.options.selectable);this.setSelectedItemIndex(this.options.selectedItemIndex)},destroy:function(){this._selectedItem=null;this._selectedItemIndex=-1;this.parent()},setSelectedItem:function(a){if(this._selectable==false){return this}if(this._selectedItem===a){return this}if(this._selectedItem){this._selectedItem.setSelected(false);this._selectedItem=null;this.fireEvent("deselect",this._selectedItem)}if(a){this._selectedItem=a;this._selectedItem.setSelected(true);this.fireEvent("select",this._selectedItem)}this._selectedItemIndex=a?this.getChildComponentIndex(a):-1;return this},getSelectedItem:function(){return this._selectedItem},setSelectedItemIndex:function(a){var b=null;if(a>=0){b=this.getChildComponentOfTypeAt(Moobile.ListItem,a)}return this.setSelectedItem(b)},getSelectedItemIndex:function(){return this._selectedItemIndex},clearSelectedItem:function(){this.setSelectedItem(null);return this},addItem:function(b,a){return this.addChildComponent(b,a)},addItemAfter:function(a,b){return this.addChildComponentAfter(a,b)},addItemBefore:function(a,b){return this.addChildComponentBefore(a,b)},getItem:function(a){return this.getChildComponentOfType(Moobile.ListItem,a)},getItemAt:function(a){return this.getChildComponentOfTypeAt(Moobile.ListItem,a)},getItemIndex:function(a){return this.getChildComponentIndex(a)},getItems:function(){return this.getChildComponentsOfType(Moobile.ListItem)},removeItem:function(a){return this.removeChildComponent(a)},removeAllItems:function(){return this.removeAllChildComponentsOfType(Moobile.ListItem)},setSelectable:function(a){this._selectable=a;return this},isSelectable:function(){return this._selectable},didAddChildComponent:function(a){this.parent(a);if(a instanceof Moobile.ListItem){a.addEvent("tapstart",this.bound("_onItemTapStart"));a.addEvent("tapend",this.bound("_onItemTapEnd"));a.addEvent("tap",this.bound("_onItemTap"))}},didRemoveChildComponent:function(a){this.parent(a);if(a instanceof Moobile.ListItem){a.removeEvent("tapstart",this.bound("_onItemTapStart"));a.removeEvent("tapend",this.bound("_onItemTapEnd"));a.removeEvent("tap",this.bound("_onItemTap"))}},didChangeState:function(a){this.parent(a);if(a==="disabled"||a==null){this.getChildComponents().invoke("setDisabled",a)}},_onItemTapStart:function(b,a){if(this._selectable&&!a.isSelected()){a.setHighlighted(true)}},_onItemTapEnd:function(b,a){if(this._selectable&&!a.isSelected()){a.setHighlighted(false)}},_onItemTap:function(b,a){if(this._selectable){this.setSelectedItem(a)}}});Moobile.Component.defineRole("list",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.List,a,"data-list"))});Moobile.Component.defineStyle("grouped",Moobile.List,{attach:function(a){a.addClass("style-grouped")},detach:function(a){a.removeClass("style-grouped")}});Moobile.ListItem=new Class({Extends:Moobile.Control,_image:null,_label:null,_detail:null,options:{tagName:"li"},willBuild:function(){this.parent();this.element.addClass("list-item");var c=this.element.getRoleElement("image");var a=this.element.getRoleElement("label");var b=this.element.getRoleElement("detail");if(a===null){a=new Element("div");a.ingest(this.element);a.inject(this.element);a.setRole("label")}if(c===null){c=new Element("img");c.inject(this.element,"top");c.setRole("image")}if(b===null){b=new Element("div");b.inject(this.element);b.setRole("detail")}},destroy:function(){this._label=null;this._image=null;this._detail=null;this.parent()},setLabel:function(a){if(this._label===a){return this}if(typeof a==="string"){a=new Moobile.Text().setText(a)}if(this._label){this._label.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._label=a;this._label.addClass("list-item-label");return this},getLabel:function(){return this._label},setImage:function(a){if(this._image===a){return this}if(typeof a==="string"){a=new Moobile.Image().setSource(a)}if(this._image){this._image.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._image=a;this._image.addClass("list-item-image");return this},getImage:function(){return this._image},setDetail:function(a){if(this._detail===a){return this}if(typeof a==="string"){a=new Moobile.Text().setText(a)}if(this._detail){this._detail.replaceWithComponent(a,true)}else{this.addChildComponent(a)}this._detail=a;this._detail.addClass("list-item-detail");return this},getDetail:function(){return this._detail}});Moobile.Component.defineRole("list-item",Moobile.List,function(a){this.addItem(Moobile.Component.create(Moobile.ListItem,a,"data-list-item"))});Moobile.Component.defineRole("image",Moobile.ListItem,function(a){this.setImage(Moobile.Component.create(Moobile.Image,a,"data-image"))});Moobile.Component.defineRole("label",Moobile.ListItem,function(a){this.setLabel(Moobile.Component.create(Moobile.Text,a,"data-label"))});Moobile.Component.defineRole("detail",Moobile.ListItem,function(a){this.setDetail(Moobile.Component.create(Moobile.Text,a,"data-detail"))});Moobile.Component.defineStyle("checked",Moobile.ListItem,{attach:function(a){a.addClass("style-checked")},detach:function(a){a.removeClass("style-checked")}});Moobile.Component.defineStyle("disclosed",Moobile.ListItem,{attach:function(a){a.addClass("style-disclosed")},detach:function(a){a.removeClass("style-disclosed")}});Moobile.Component.defineStyle("detailed",Moobile.ListItem,{attach:function(a){a.addClass("style-detailed")},detach:function(a){a.removeClass("style-detailed")}});Moobile.ActivityIndicator=new Class({Extends:Moobile.Control,willBuild:function(){this.parent();this.element.addClass("activity-indicator")},start:function(){return this.addClass("activity")},stop:function(){return this.removeClass("activity")}});Moobile.Component.defineRole("activity-indicator",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ActivityIndicator,a,"data-activity-indicator"))});Moobile.Image=new Class({Extends:Moobile.Control,_image:null,_source:null,_loaded:false,_originalSize:{x:0,y:0},options:{tagName:"img",preload:false},willBuild:function(){this.parent();if(this.element.get("tag")!=="img"){throw new Error("Moobile.Image requires an <img> element.")}this.element.addClass("image");this.hide();var a=this.element.get("src");if(a){this.setSource(a)}},destroy:function(){this._image=null;this.parent()},setSource:function(a){this._source=a;if(this._image){this._image.removeEvent("load",this.bound("_onLoad"));this._image=null}if(a){if(this.options.preload){this._loaded=false;this._image=new Image();this._image.src=a;this._image.addEvent("load",this.bound("_onLoad"))}else{this._load()}}else{this._unload()}return this},getSource:function(){return this._source},getImage:function(){return this._image},getOriginalSize:function(){return this._originalSize},isLoaded:function(){return this._loaded},_load:function(){this._loaded=true;if(this.options.preload){this._originalSize.x=0;this._originalSize.y=0}this.element.set("src",this._source);this.fireEvent("load");this.show()},_unload:function(){this._loaded=false;if(this.options.preload){this._originalSize.x=this._image.width;this._originalSize.y=this._image.height}this.element.erase("src");this.fireEvent("unload");this.hide()},_onLoad:function(){this._load()}});Moobile.Component.defineRole("image",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Image,a,"data-image"))});Moobile.Text=new Class({Extends:Moobile.Control,options:{tagName:"span"},willBuild:function(){this.parent();this.element.addClass("text")},setText:function(a){this.element.set("html",a);return this},getText:function(){return this.element.get("html")}});Moobile.Component.defineRole("text",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.Text,a,"data-text"))});Moobile.Alert=new Class({Extends:Moobile.Component,_title:null,_message:null,_buttons:[],wrapperElement:null,contentElement:null,headerElement:null,footerElement:null,contentElement:null,overlay:null,options:{buttonLayout:"vertical"},willBuild:function(){this.parent();this.element.addClass("alert");this.element.addEvent("animationend",this.bound("_onAnimationEnd"));this.overlay=new Moobile.Overlay();this.overlay.setStyle("radial");this.addChildComponent(this.overlay);this.headerElement=new Element("div.alert-header");this.footerElement=new Element("div.alert-footer");this.contentElement=new Element("div.alert-content");this.wrapperElement=new Element("div.alert-wrapper");this.wrapperElement.grab(this.headerElement);this.wrapperElement.grab(this.contentElement);this.wrapperElement.grab(this.footerElement);this.element.grab(this.wrapperElement);var a=this.options.buttonLayout;if(a){this.element.addClass("button-layout-"+a)}},destroy:function(){this.element.addEvent("animationend",this.bound("_onAnimationEnd"));this._title=null;this._message=null;this.wrapperElement=null;this.headerElement=null;this.footerElement=null;this.contentElement=null;this.overlay.destroy();this.overlay=null;this.parent()},setTitle:function(a){if(this._title===a){return this}if(typeof a==="string"){a=new Moobile.Text().setText(a)}if(this._title){this._title.replaceWithComponent(a,true)}else{this.addChildComponentInside(a,this.headerElement)}this._title=a;this._title.addClass("title");return this},getTitle:function(){return this._title},setMessage:function(a){if(this._message===a){return this}if(typeof a==="string"){a=new Moobile.Text().setText(a)}if(this._message){this._message.replaceWithComponent(a,true)}else{this.addChildComponentInside(a,this.contentElement)}this._message=a;this._message.addClass("message");return this},getMessage:function(){return this._message},addButton:function(a){if(typeof a==="string"){a=new Moobile.Button().setLabel(a)}return this.addChildComponentInside(a,this.footerElement)},setDefaultButton:function(a){if(this.hasChildComponent(a)){a.addClass("default")}return this},setDefaultButtonIndex:function(a){return this.setDefaultButton(this.getChildComponentOfTypeAt(Moobile.Button,a))},showAnimated:function(){this.willShow();this.element.show();this.element.addClass("show-animated");this.overlay.showAnimated();return this},hideAnimated:function(){this.willHide();this.element.addClass("hide-animated");this.overlay.hideAnimated();return this},didAddChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.addEvent("tap",this.bound("_onButtonTap"));this._buttons.include(a)}},didRemoveChildComponent:function(a){this.parent(a);if(a instanceof Moobile.Button){a.removeEvent("tap",this.bound("_onButtonTap"));this._buttons.erase(a)}},willShow:function(){this.parent();if(this._buttons.length===0){var a=new Moobile.Button();a.setLabel("OK");this.addButton(a)}},didHide:function(){this.parent();this.destroy()},_onButtonTap:function(c,b){var a=this.getChildComponentsOfType(Moobile.Button).indexOf(b);if(a>=0){this.fireEvent("dismiss",[b,a])}this.hideAnimated()},_onAnimationEnd:function(a){a.stop();if(this.element.hasClass("show-animated")){this.element.removeClass("show-animated");this.didShow()}if(this.element.hasClass("hide-animated")){this.element.removeClass("hide-animated");this.element.hide();this.didHide()}}});Moobile.Popover=new Class({Extends:Moobile.Component,content:null,visible:false,options:{autoHide:true,autoHideAnimated:true,direction:"top",alignment:"center"},willBuild:function(){this.parent();this.element.addClass("popover");this.element.addClass("popover-direction-"+this.options.direction);this.element.addClass("popover-alignment-"+this.options.alignment);this.contentElement=new Element("div.popover-content");this.contentElement.inject(this.element);this.animations=new Moobile.Animation.Set();this.animations.setAnimation("show",new Moobile.Animation().setAnimationClass("show-animated"));this.animations.setAnimation("hide",new Moobile.Animation().setAnimationClass("hide-animated"));this.animations.setElement(this);this.animations.addEvent("start",this.bound("_onAnimationSetStart"));this.animations.addEvent("end",this.bound("_onAnimationSetEnd"));this.hide()},didBecomeReady:function(){this.parent();if(this.options.autoHide){this.getWindow().addEvent("tap",this.bound("_onTapOut"))}},destroy:function(){if(this.options.autoHide){var a=this.getWindow();if(a){a.removeEvent("tap",this.bound("_onTapOut"))}}this.parent()},addChild:function(b,a){if(a==="header"){return this.parent(child,"top")}if(a==="footer"){return this.parent(child,"bottom")}return this.addChildComponentInside(b,this.contentElement,a)},position:function(a,f){if(!this.isReady()){throw new Error("Popover is not ready therefore cannot be positionned")}this.element.show();var b=this.element.getSize();this.element.hide();if(a instanceof Element||a instanceof Moobile.Component){var d=f instanceof Element||f instanceof Moobile.Component?f:null;var c=a.getSize();var e=a.getPosition(d);switch(this.options.direction){case"top":a=e.x+c.x/2;f=e.y+c.y;break;case"bottom":a=e.x+c.x/2;f=e.y;break;case"left":a=e.x+c.x;f=e.y+c.y/2;break;case"right":a=e.x;f=e.y+c.y/2;break}}switch(this.options.direction){case"top":break;case"bottom":f=f-b.y;break;case"left":break;case"right":a=a-b.x;break}switch(this.options.alignment){case"left":break;case"right":a=a-b.x;break;case"center":a=a-b.x/2;break;case"top":break;case"bottom":f=f-b.y;break;case"middle":f=f-b.y/2;break}this.element.setStyle("top",Math.round(f));this.element.setStyle("left",Math.round(a))},showAnimated:function(){this.animations.start("show");return this},hideAnimated:function(){this.animations.start("hide");return this},_onTapOut:function(b,a){if(this.options.autoHide&&this.isVisible()&&!this.element.contains(b.target)){if(this.options.autoHideAnimated){this.hideAnimated()}else{this.hide()}}},_onAnimationSetStart:function(a){switch(a.getName()){case"show":this.willShow();this.element.show();break;case"hide":this.willHide();break}},_onAnimationSetEnd:function(a){switch(a.getName()){case"show":this._visible=true;this.element.removeClass("hidden");this.didShow();this.fireEvent("show");break;case"hide":this._visible=false;this.element.hide();this.element.addClass("hidden");this.didHide();this.fireEvent("hide");break}}});(function(){var d=Element.prototype.setStyle;var a=Element.prototype.getStyle;var c=["Khtml","O","Ms","Moz","Webkit"];var b={};Element.implement({getPrefixed:function(g){g=g.camelCase();if(g in this.style){return g}if(b[g]!==undefined){return b[g]}var h=g.charAt(0).toUpperCase()+g.slice(1);for(var f=0;f<c.length;f++){var e=c[f]+h;if(e in this.style){b[g]=e;break}}return b[g]},setStyle:function(f,e){return d.call(this,this.getPrefixed(f),e)},getStyle:function(e){return a.call(this,this.getPrefixed(e))}})})();(function(){[Element,Window,Document].invoke("implement",{hasEvent:function(g){var f=this.retrieve("events"),h=(f&&f[g])?f[g].values:null;if(h){for(var e=h.length;e--;){if(e in h){return true}}}return false}});var d=function(g,h,e,f){h=g[h];e=g[e];return function(i,j){if(!j){j=f}if(e&&!this.hasEvent(j)){e.call(this,i,j)}if(h){h.call(this,i,j)}}};var b=function(g,f,h,e){return function(i,j){f[h].call(this,i,j||e);g[h].call(this,i,j||e)}};var c=Element.Events;Element.defineCustomEvent=function(e,g){var f=c[g.base];g.onAdd=d(g,"onAdd","onSetup",e);g.onRemove=d(g,"onRemove","onTeardown",e);c[e]=f?Object.append({},g,{base:f.base,condition:function(h){return(!f.condition||f.condition.call(this,h))&&(!g.condition||g.condition.call(this,h))},onAdd:b(g,f,"onAdd",e),onRemove:b(g,f,"onRemove",e)}):g;return this};var a=function(e){var f="on"+e.capitalize();Element[e+"CustomEvents"]=function(){Object.each(c,function(h,g){if(h[f]){h[f].call(h,g)}})};return a};a("enable")("disable")})();(function(){var a=function(){window.fireEvent("ready")};Element.defineCustomEvent("ready",{onSetup:function(){if(Browser.Platform.cordova){document.addEventListener("deviceready",a);return}window.addEvent("domready",a)},onTeardown:function(){if(Browser.Platform.cordova){document.removeEventListener("deviceready",a);return}window.removeEvent("domready",a)}});window.addEvent("ready",function(){if(parent){parent.fireEvent("appready")}})})();(function(){var a="";if(Browser.safari||Browser.chrome||Browser.Platform.ios){a="webkit"}else{if(Browser.firefox){a="Moz"}else{if(Browser.opera){a="o"}else{if(Browser.ie){a="ms"}}}}Element.NativeEvents[a+"TransitionEnd"]=2;Element.Events.transitionend={base:(a+"TransitionEnd")};Element.NativeEvents[a+"AnimationEnd"]=2;Element.Events.animationend={base:(a+"AnimationEnd")}})();(function(){if(!window.orientation){window.orientation=0}if(!window.orientationName){window.orientationName="portrait"}var a=function(){window.orientationName=Math.abs(window.orientation)===90?"landscape":"portrait"};Element.defineCustomEvent("rotate",{base:"orientationchange",condition:function(b){a();return true}});a()})();if(!Browser.Features.Touch){(function(){var a=function(b){b.targetTouches=[];b.changedTouches=b.touches=[{pageX:b.page.x,pageY:b.page.y,clientX:b.client.x,clientY:b.client.y}];return true};Element.defineCustomEvent("touchstart",{base:"mousedown",condition:a}).defineCustomEvent("touchmove",{base:"mousemove",condition:a}).defineCustomEvent("touchend",{base:"mouseup",condition:a})})()}if(!Browser.Features.Touch){(function(){var b=false;var a=function(d){b=true};var c=function(d){b=false};Element.defineCustomEvent("touchmove",{base:"touchmove",condition:function(d){d.targetTouches=[];d.changedTouches=d.touches=[{pageX:d.page.x,pageY:d.page.y,clientX:d.client.x,clientY:d.client.y}];return b},onSetup:function(){this.addEvent("mousedown",a);this.addEvent("mouseup",c)},onTeardown:function(){this.removeEvent("mousedown",a);this.removeEvent("mouseup",c)}})})()}(function(){var b=0;var a=0;var d=0;var h=0;var c=0;var f=0;var i=true;var g=function(j){if(j.changedTouches.length>1){i=false;return}i=true;b=j.changedTouches[0].clientX;a=j.changedTouches[0].clientY;d=b+10;h=b-10;c=a+10;f=a-10};var e=function(k){if(k.changedTouches.length>1){i=false;return}if(i){var j=k.changedTouches[0].clientX;var l=k.changedTouches[0].clientY;i=!(j>d||j<h||l>c||l<f)}else{this.fireEvent("tapend",k)}};Element.defineCustomEvent("tap",{base:"touchend",condition:function(j){return i},onSetup:function(){this.addEvent("touchstart",g);this.addEvent("touchmove",e)},onTeardown:function(){this.removeEvent("touchstart",g);this.removeEvent("touchmove",e)}});Element.defineCustomEvent("tapstart",{base:"touchstart",condition:function(j){return j.changedTouches.length===1}});Element.defineCustomEvent("tapmove",{base:"touchmove",condition:function(j){return j.changedTouches.length===1}});Element.defineCustomEvent("tapend",{base:"touchend",condition:function(j){return j.changedTouches.length===1}})})();if(!window.Moobile){window.Moobile={}}Moobile.Request=new Class({Extends:Request,options:{isSuccess:function(){var a=this.status;return(a===0||(a>=200&&a<300))}}});Moobile.Scroller=new Class({Extends:Moobile.EventFirer,_startScroll:null,_startTime:null,_startPage:null,_page:{x:0,y:0},engine:null,contentElement:null,wrapperElement:null,options:{engine:["Native","IScroll"],momentum:true,scrollX:true,scrollY:true,snapToPage:false,snapToPageAt:35,snapToPageDuration:150,snapToPageDelay:150},initialize:function(g,a){this.setOptions(a);if(this.options.snapToPage){this.options.momentum=false}var e=null;var f=Array.from(this.options.engine);for(var c=0;c<f.length;c++){var d=Moobile.Scroller.Engine[f[c]];if(d===undefined){throw new Error("The scroller engine "+d+" does not exists")}if(d.supportsCurrentPlatform===undefined||d.supportsCurrentPlatform&&d.supportsCurrentPlatform.call(this)){e=d;break}}if(e===null){throw new Error("There are no scrolling engine available")}var a={momentum:this.options.momentum,scrollX:this.options.scrollX,scrollY:this.options.scrollY};this.engine=new e(g,a);this.engine.addEvent("dragstart",this.bound("_onDragStart"));this.engine.addEvent("dragend",this.bound("_onDragEnd"));this.engine.addEvent("scroll",this.bound("_onScroll"));this.wrapperElement=this.getWrapperElement();this.contentElement=this.getContentElement();var b=this.contentElement.get("class");if(b){b.split(" ").each(function(h){this.wrapperElement.addClass(h+"-wrapper")},this)}this.wrapperElement.addClass("scroll");return this},destroy:function(){this.engine.destroy();this.engine=null;return this},scrollTo:function(a,c,b){this.engine.scrollTo(a,c,b);return this},scrollToPage:function(f,e,d){f=f||0;e=e||0;var c=this.getSize();var h=this.getScrollSize();var b=Math.ceil(h.x/c.x)-1;var a=Math.ceil(h.y/c.y)-1;if(f<0){f=0}if(e<0){e=0}if(f>b){f=b}if(e>a){e=a}var i=c.x*f;var g=c.y*e;if(f===b){i=h.x-c.x}if(e===a){g=h.y-c.y}this.scrollTo(i,g,d);this._page.x=f;this._page.y=e;return this},scrollToElement:function(a,b){this.engine.scrollToElement(document.id(a),b);return this},snap:function(){var a=this.getSize();var i=this.getScroll();var d=Date.now()-this._startTime;var h=this._startPage.x;var g=this._startPage.y;var e=Math.round((i.x-this._startScroll.x)*100/a.x);var c=Math.round((i.y-this._startScroll.y)*100/a.y);var f=e>=0?1:-1;var b=c>=0?1:-1;if(Math.abs(this._startScroll.x-i.x)<10){f=0}if(Math.abs(this._startScroll.y-i.y)<10){b=0}if(Math.abs(e)>=this.options.snapToPageAt||d<=this.options.snapToPageDelay){h+=f}if(Math.abs(c)>=this.options.snapToPageAt||d<=this.options.snapToPageDelay){g+=b}this.scrollToPage(h,g,this.options.snapToPageDuration);return this},refresh:function(){this.engine.refresh();return this},getSize:function(){return this.engine.getSize()},getScroll:function(){return this.engine.getScroll()},getScrollSize:function(){return this.engine.getScrollSize()},getPage:function(){return this._page},getContentElement:function(){return this.engine.getContentElement()},getWrapperElement:function(){return this.engine.getWrapperElement()},_onDragStart:function(){this._startScroll=this.getScroll();this._startPage=this.getPage();this._startTime=Date.now();this.fireEvent("dragstart")},_onDragEnd:function(){if(this.options.snapToPage){this.snap()}this._startScroll=null;this._startPage=null;this._startTime=null;this.fireEvent("dragend")},_onScroll:function(){this._page.x=Math.floor(this.getScroll().x/this.getSize().x);this._page.y=Math.floor(this.getScroll().y/this.getSize().y);this.fireEvent("scroll")}});(function(){window.addEvent("domready",function(a){var b=null;document.addEvent("touchstart",function(c){b=c.client});document.addEvent("touchmove",function(c){if(c.target.getParent(".scroll")===null){c.preventDefault()}else{}})})})();if(!window.Moobile){window.Moobile={}}if(!window.Moobile.Scroller){window.Moobile.Scroller={}}Moobile.Scroller.Engine=new Class({Extends:Moobile.EventFirer,contentElement:null,wrapperElement:null,options:{momentum:true,scrollX:true,scrollY:true,},initialize:function(b,a){b=document.id(b);this.setOptions(a);this.wrapperElement=new Element("div");this.wrapperElement.wraps(b);this.contentElement=b;return this},destroy:function(){this.contentElement.wraps(this.wrapperElement);this.contentElement=null;this.wrapperElement.destroy();this.wrapperElement=null;return this},scrollTo:function(a,c,b){throw new Error("You must override this method")},scrollToElement:function(a,b){throw new Error("You must override this method")},refresh:function(){throw new Error("You must override this method")},getSize:function(){throw new Error("You must override this method")},getScroll:function(){throw new Error("You must override this method")},getScrollSize:function(){throw new Error("You must override this method")},getContentElement:function(){return this.contentElement},getWrapperElement:function(){return this.wrapperElement}});(function(){iScroll.prototype._currentSize={x:0,y:0};var a=iScroll.prototype._checkDOMChanges;iScroll.prototype._checkDOMChanges=function(){a.call(this);var b=this.wrapper.getSize();if(this._currentSize.x!=b.x||this._currentSize.y!=b.y){this._currentSize=b;this.refresh()}}})();Moobile.Scroller.Engine.IScroll=new Class({Extends:Moobile.Scroller.Engine,scroller:null,initialize:function(b,a){this.parent(b,a);this.wrapperElement.addClass("scroll-engine-iscroll");var a={hScroll:this.options.scrollX,vScroll:this.options.scrollY,momentum:this.options.momentum,bounce:this.options.momentum,hScrollbar:this.options.momentum,vScrollbar:this.options.momentum,useTransform:true,useTransition:true,hideScrollbar:true,fadeScrollbar:true,checkDOMChanges:true,snap:false,onScrollMove:this.bound("_onScrollMove"),onScrollEnd:this.bound("_onScrollEnd")};this.scroller=new iScroll(this.wrapperElement,a);this.wrapperElement.addEvent("touchstart",this.bound("_onTouchStart"));this.wrapperElement.addEvent("touchend",this.bound("_onTouchEnd"));window.addEvent("orientationchange",this.bound("_onOrientationChange"));return this},destroy:function(){this.scroller.destroy();this.parent();return this},scrollTo:function(a,c,b){(function(){this.scroller.scrollTo(-a,-c,b)}).delay(5,this);return this},scrollToElement:function(a,c){var b=a.getPosition(this.contentElement);this.scrollTo(b.x,b.y,c);return this},refresh:function(){this.scroller.refresh();return this},getSize:function(){return this.wrapperElement.getSize()},getScroll:function(){return{x:-this.scroller.x,y:-this.scroller.y}},getScrollSize:function(){return this.contentElement.getScrollSize()},_onTouchStart:function(){this.fireEvent("dragstart")},_onTouchEnd:function(){this.fireEvent("dragend")},_onScrollMove:function(){this.fireEvent("scroll")},_onScrollEnd:function(){this.fireEvent("scroll")},_onOrientationChange:function(){this.refresh()}});Moobile.Scroller.Engine.IScroll.supportsCurrentPlatform=function(){return true};Moobile.Scroller.Engine.Native=new Class({Extends:Moobile.Scroller.Engine,scroller:null,scrolling:false,initialize:function(b,a){this.parent(b,a);this.wrapperElement.addClass("scroll-engine-native");this.wrapperElement.setStyle("overflow-x",this.options.scrollX?"scroll":"hidden");this.wrapperElement.setStyle("overflow-y",this.options.scrollY?"scroll":"hidden");this.wrapperElement.setStyle("-webkit-overflow-scrolling",this.options.momentum?"touch":"auto");this.scroller=new Fx.Scroll(this.wrapperElement);this.wrapperElement.addEvent("touchstart",this.bound("_onTouchStart"));this.wrapperElement.addEvent("touchend",this.bound("_onTouchEnd"));this.wrapperElement.addEvent("scroll",this.bound("_onScroll"));window.addEvent("rotate",this.bound("_onWindowRotate"));return this},destroy:function(){window.removeEvent("rotate",this.bound("_onWindowRotate"));this.scroller=null;this.parent()},scrollTo:function(a,c,b){b=b||0;this.scroller.setOptions({duration:b});this.scroller.start(a,c);return this},scrollToElement:function(a,b){b=b||0;a=document.id(a);this.scroller.setOptions({duration:b});this.scroller.toElement(a);return this},refresh:function(){var a=this.getSize();var b=this.getScrollSize();if(b.y<=a.y){this.contentElement.setStyle("min-height",a.y+2)}return this},getSize:function(){return this.wrapperElement.getSize()},getScroll:function(){return this.wrapperElement.getScroll()},getScrollSize:function(){return this.contentElement.getScrollSize()},_onTouchStart:function(){var a=this.wrapperElement.getScroll();if(a.x===0){if(a.y<=0){this.wrapperElement.scrollTo(0,1)}else{var b=this.wrapperElement.getScrollSize();var c=this.wrapperElement.getSize();if(c.y+a.y>=b.y){this.wrapperElement.scrollTo(0,a.y-1)}}}this.fireEvent("dragstart")},_onTouchEnd:function(){this.fireEvent("dragend")},_onScroll:function(){this.fireEvent("scroll")},_onWindowRotate:function(a){this.refresh()}});Moobile.Scroller.Engine.Native.supportsCurrentPlatform=function(){return"WebkitOverflowScrolling" in new Element("div").style};Moobile.Overlay=new Class({Extends:Moobile.Component,willBuild:function(){this.parent();this.element.addClass("overlay");this.element.addEvent("animationend",this.bound("_onAnimationEnd"))},destroy:function(){this.element.removeEvent("animationend",this.bound("_onAnimationEnd"));this.parent()},showAnimated:function(){this.willShow();this.element.show();this.element.addClass("show-animated");return this},hideAnimated:function(){this.willHide();this.element.addClass("hide-animated");return this},_onAnimationEnd:function(a){a.stop();if(this.element.hasClass("show-animated")){this.element.removeClass("show-animated");this.didShow()}if(this.element.hasClass("hide-animated")){this.element.removeClass("hide-animated");this.element.hide();this.didHide()}}});Moobile.Component.defineStyle("radial",Moobile.Bar,{attach:function(a){a.addClass("style-radial")},detach:function(a){a.removeClass("style-radial")}});String.implement({toCamelCase:function(){return this.camelCase().replace("-","").replace(/\s\D/g,function(a){return a.charAt(1).toUpperCase()})}});Array.implement({find:function(b){for(var a=0;a<this.length;a++){var c=b.call(this,this[a]);if(c===true){return this[a]}}return null},getLastItemAtOffset:function(a){a=a?a:0;return this[this.length-1-a]?this[this.length-1-a]:null}});Moobile.View=new Class({Extends:Moobile.Component,contentElement:null,willBuild:function(){this.parent();this.element.addClass("view");var a=this.element.getRoleElement("view-content");if(a===null){a=new Element("div");a.ingest(this.element);a.inject(this.element);a.setRole("view-content")}},didBuild:function(){this.parent();var a=this.element.get("class");if(a){a.split(" ").each(function(b){b=b.trim();if(b){this.contentElement.addClass(b+"-content")}},this)}},destroy:function(){this.contentElement=null;this.parent()},enableTouch:function(){this.element.removeClass("disable").addClass("enable");return this},disableTouch:function(){this.element.removeClass("enable").addClass("disable");return this},addChildComponent:function(b,a){if(a==="header"){return this.parent(b,"top")}if(a==="footer"){return this.parent(b,"bottom")}return this.addChildComponentInside(b,this.contentElement,a)},willAddChildComponent:function(a){this.parent(a);a.setParentView(this)},willRemoveChildComponent:function(a){this.parent(a);a.setParentView(null)},setContentElement:function(a){if(this.contentElement===a){return this}if(this.element.contains(a)===false){if(this.contentElement){this.contentElement.grab(a,"after");this.contentElement.destroy()}else{this.element.grab(a)}}this.contentElement=a;this.contentElement.addClass("view-content");return this},getContentElement:function(){return this.contentElement}});Class.refactor(Moobile.Component,{_parentView:null,setParentView:function(a){if(this._parentView===a){return this}this.parentViewWillChange(a);this._parentView=a;this.parentViewDidChange(a);if(this instanceof Moobile.View){return this}var b=function(c){return !(c instanceof Moobile.View)};this.getChildComponents().filter(b).invoke("setParentView",a);return this},getParentView:function(){return this._parentView},parentViewWillChange:function(a){},parentViewDidChange:function(a){},willAddChildComponent:function(a){this.previous(a);a.setParentView(this._parentView)},willRemoveChildComponent:function(a){this.previous(a);a.setParentView(null)}});Moobile.View.at=function(b){var a=Element.at(b);if(a){return Moobile.Component.create(Moobile.View,a,"data-view")}return null};Moobile.View.prototype.addChild=Moobile.View.prototype.addChildComponent;Moobile.Component.defineRole("view",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.View,a,"data-view"))});Moobile.Component.defineRole("view-content",Moobile.View,{traversable:true,behavior:function(a){this.setContentElement(a)}});Moobile.ScrollView=new Class({Extends:Moobile.View,_scroller:null,wrapperElement:null,options:{momentum:true,scrollX:false,scrollY:true,snapToPage:false,snapToPageAt:35,snapToPageDuration:150,snapToPageDelay:150,offset:{x:0,y:0}},willBuild:function(){this.parent();this.element.addClass("scroll-view")},didBuild:function(){this.parent();var a={momentum:this.options.momentum,scrollX:this.options.scrollX,scrollY:this.options.scrollY,snapToPage:this.options.snapToPage,snapToPageAt:this.options.snapToPageAt,snapToPageDuration:this.options.snapToPageDuration,snapToPageDelay:this.options.snapToPageDelay};this._scroller=new Moobile.Scroller(this.contentElement,a);this._scroller.addEvent("dragstart",this.bound("_onDragStart"));this._scroller.addEvent("dragend",this.bound("_onDragEnd"));this._scroller.addEvent("scroll",this.bound("_onScroll"));this.wrapperElement=this._scroller.getWrapperElement();this.wrapperElement.addClass("view-content-wrapper")},didBecomeReady:function(){this.parent();this._scroller.refresh()},destroy:function(){this._scroller.removeEvent("dragstart",this.bound("_onDragStart"));this._scroller.removeEvent("dragend",this.bound("_onDragEnd"));this._scroller.removeEvent("scroll",this.bound("_onScroll"));this._scroller.destroy();this._scroller=null;this.parent()},scrollTo:function(a,c,b){this._scroller.scrollTo(a,c,b);return this},scrollToPage:function(b,a,c){this._scroller.scrollToPage(b,a,c);return this},scrollToElement:function(a,b){this._scroller.scrollToElement(a,b);return this},getScroll:function(){return this._scroller.getScroll()},getScrollSize:function(){return this._scroller.getScrollSize()},getScroller:function(){return this._scroller},getWrapperElement:function(){return this.wrapperElement},willHide:function(){this.parent();this.options.offset=this._scroller.getScroll()},didShow:function(){this.parent();var a=this.options.offset;if(a.x&&a.y){this._scroller.scrollTo(a.x,a.y)}},_onDragStart:function(){this.fireEvent("dragstart")},_onDragEnd:function(){this.fireEvent("dragend")},_onScroll:function(){this.fireEvent("scroll")}});Moobile.Component.defineRole("scroll-view",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ScrollView,a,"data-scroll-view"))});Moobile.ViewPanel=new Class({Extends:Moobile.View,_mainPanel:null,_sidePanel:null,willBuild:function(){this.parent();this.element.addClass("view-panel");var c=this.element.getRoleElement("view-content");var a=c.getRoleElement("main-panel");if(a===null){a=new Element("div");a.ingest(c);a.inject(c);a.setRole("main-panel")}var b=c.getRoleElement("side-panel");if(b===null){b=new Element("div");b.inject(c,"top");b.setRole("side-panel")}},didBuild:function(){this.parent();this.contentElement.addClass("view-panel-content")},destroy:function(){this._sidePanel=null;this._mainPanel=null;this.parent()},setSidePanel:function(a){if(this._sidePanel===a){return this}if(this._sidePanel===null){this.contentElement.grab(a);this._sidePanel=a}else{a.replaces(this._sidePanel);this._sidePanel.destroy();this._sidePanel=a}this._sidePanel.addClass("side-panel");return this},getSidePanel:function(){return this.contentElement.getSidePanel()},setMainPanel:function(a){if(this._mainPanel===a){return this}if(this._mainPanel===null){this.contentElement.grab(a);this._mainPanel=a}else{a.replaces(this._mainPanel);this._mainPanel.destroy();this._mainPanel=a}this._mainPanel.addClass("main-panel");return this},getMainPanel:function(){return this.contentElement.getMainPanel()}});Moobile.Component.defineRole("view-panel",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ViewPanel,a,"data-view-panel"))});Moobile.Component.defineRole("side-panel",Moobile.ViewPanel,{traversable:true,behavior:function(a){this.setSidePanel(a)}});Moobile.Component.defineRole("main-panel",Moobile.ViewPanel,{traversable:true,behavior:function(a){this.setMainPanel(a)}});Moobile.ViewStack=new Class({Extends:Moobile.View,willBuild:function(){this.parent();this.element.addClass("view-stack")},didBuild:function(){this.parent();this.contentElement.addClass("view-stack-content")}});Moobile.Component.defineRole("view-stack",null,function(a){this.addChildComponent(Moobile.Component.create(Moobile.ViewStack,a,"data-view-stack"))});if(!window.Moobile){window.Moobile={}}Moobile.ViewController=new Class({Extends:Moobile.EventFirer,_name:null,_title:null,_image:null,_viewReady:false,_viewTransition:null,_parent:null,_children:[],_modal:false,_modalViewController:null,view:null,initialize:function(b,a){this._name=a;this.setOptions(b);this.loadView();if(this.view){this.view.addEvent("ready",this.bound("_onViewReady"));this.viewDidLoad()}window.addEvent("rotate",this.bound("_onWindowRotate"));return this},loadView:function(){if(this.view===null){this.view=new Moobile.View()}},addChildViewController:function(b){var a=function(){var c=b.getView();if(c){this.view.addChildComponent(c)}};return this._addChildViewControllerAt(b,this._children.length,a)},addChildViewControllerAfter:function(c,d){var a=this.getChildViewControllerIndex(d);if(a===-1){return this}var b=function(){var e=c.getView();if(e){var f=d.getView();if(f){this.view.addChildComponentAfter(e,f)}}};return this._addChildViewControllerAt(c,a+1,b)},addChildViewControllerBefore:function(d,c){var a=this.getChildViewControllerIndex(c);if(a===-1){return this}var b=function(){var e=d.getView();if(e){var f=c.getView();if(f){this.view.addChildComponentBefore(e,f)}}};return this._addChildViewControllerAt(d,a,b)},_addChildViewControllerAt:function(c,a,b){if(this.hasChildViewController(c)){return this}c.removeFromParentViewController();this.willAddChildViewController(c);this._children.splice(a,0,c);c.setParentViewController(this);if(b){b.call(this)}this.didAddChildViewController(c);return this},getChildViewController:function(a){return this._children.find(function(b){return b.getName()===a})},getChildViewControllerAt:function(a){return this._children[a]||null},getChildViewControllerIndex:function(a){return this._children.indexOf(a)},getChildViewControllers:function(){return this._children},hasChildViewController:function(a){return this._children.contains(a)},removeChildViewController:function(c,b){if(!this.hasChildViewController(c)){return this}this.willRemoveChildViewController(c);this._children.erase(c);c.setParentViewController(null);var a=c.getView();if(a){a.removeFromParentComponent()}this.didRemoveChildViewController(c);if(b){c.destroy()}return this},removeFromParentViewController:function(a){return this._parent?this._parent.removeChildViewController(this,a):false},removeAllChildViewControllers:function(a){this._children.filter(function(){return true}).invoke("removeFromParentViewController",a);return this},presentModalViewController:function(e,b){if(this._modalViewController){return this}this.willPresentModalViewController(e);e.setParentViewController(this);e.setModal(true);this._modalViewController=e;var a=e.getView();var d=this.view;var c=this.view.getParentView();c.addChildComponent(a);b=b||new Moobile.ViewTransition.Cover;b.addEvent("start:once",this.bound("_onPresentTransitionStart"));b.addEvent("complete:once",this.bound("_onPresentTransitionCompleted"));b.enter(a,d,c);e.setViewTransition(b);return this},_onPresentTransitionStart:function(){this._modalViewController.viewWillEnter()},_onPresentTransitionCompleted:function(){this._modalViewController.viewDidEnter();this.didPresentModalViewController()},dismissModalViewController:function(){if(this._modalViewController===null){return this}this.willDismissModalViewController();var a=this.view;var d=this._modalViewController.getView();var c=this.view.getParentView();var b=this._modalViewController.getViewTransition();b.addEvent("start:once",this.bound("_onDismissTransitionStart"));b.addEvent("complete:once",this.bound("_onDismissTransitionCompleted"));b.leave(a,d,c);return this},_onDismissTransitionStart:function(){this._modalViewController.viewWillLeave()},_onDismissTransitionCompleted:function(){this._modalViewController.viewDidLeave();this._modalViewController.destroy();this._modalViewController=null;this.didDismissModalViewController()},getName:function(){return this._name},setTitle:function(b){if(this._title===b){return this}if(typeof b==="string"){var a=b;b=new Moobile.Text();b.setText(a)}this._title=b;return this},getTitle:function(){return this._title},setImage:function(b){if(this._image===b){return this}if(typeof b==="string"){var a=b;b=new Moobile.Image();b.setSource(a)}this._image=b;return this},getImage:function(){return this._image},setModal:function(a){this._modal=a},isModal:function(){return this._modal},isViewReady:function(){return this._viewReady},getView:function(){return this.view},setViewTransition:function(a){this._viewTransition=a;return this},getViewTransition:function(){return this._viewTransition},setParentViewController:function(a){this.parentViewControllerWillChange(a);this._parent=a;this.parentViewControllerDidChange(a);return this},getParentViewController:function(){return this._parent},willAddChildViewController:function(a){},didAddChildViewController:function(a){},willRemoveChildViewController:function(a){},didRemoveChildViewController:function(a){},parentViewControllerWillChange:function(a){},parentViewControllerDidChange:function(a){},willPresentModalViewController:function(a){},didPresentModalViewController:function(a){},willDismissModalViewController:function(){},didDismissModalViewController:function(){},didRotate:function(a){},viewDidLoad:function(){},viewDidBecomeReady:function(){},viewWillEnter:function(){},viewDidEnter:function(){},viewWillLeave:function(){},viewDidLeave:function(){},destroy:function(){window.removeEvent("rotate",this.bound("_onWindowRotate"));this.removeFromParentViewController();this.removeAllChildViewControllers(true);if(this._modalViewController){this._modalViewController.destroy();this._modalViewController=null}this.view.destroy();this.view=null;if(this._title){this._title.destroy();this._title=null}if(this._image){this._image.destroy();this._image=null}this._parent=null;this._children=null;this._viewTransition=null},_onWindowRotate:function(a){this.didRotate(window.orientationName)},_onViewReady:function(){if(this._viewReady===false){this._viewReady=true;this.viewDidBecomeReady()}}});Moobile.ViewControllerStack=new Class({Extends:Moobile.ViewController,_animating:false,loadView:function(){this.view=new Moobile.ViewStack()},pushViewController:function(f,d){if(this._animating){return this}if(this.getTopViewController()===f){return this}var b=this.getChildViewControllers();f.removeFromParentViewController();f.setViewControllerStack(this);this.willPushViewController(f);this.addChildViewController(f);var a=f;var g=b.getLastItemAtOffset(1);var c=a.getView();var e=g?g.getView():null;this._animating=true;d=d||new Moobile.ViewTransition.None();d.addEvent("start:once",this.bound("onPushTransitionStart"));d.addEvent("complete:once",this.bound("onPushTransitionComplete"));d.enter(c,e,this.view,b.length===1);a.setViewTransition(d);return this},onPushTransitionStart:function(c){var b=this.getChildViewControllers();var a=b.getLastItemAtOffset(0);var d=b.getLastItemAtOffset(1);if(d){d.viewWillLeave()}a.viewWillEnter()},onPushTransitionComplete:function(c){var b=this.getChildViewControllers();var a=b.getLastItemAtOffset(0);var d=b.getLastItemAtOffset(1);if(d){d.viewDidLeave()}this.didPushViewController(a);a.viewDidEnter();this._animating=false},popViewController:function(){if(this._animating){return this}var a=this.getChildViewControllers();if(a.length<=1){return this}var c=a.getLastItemAtOffset(0);var d=a.getLastItemAtOffset(1);this.willPopViewController(c);this._animating=true;var b=c.getViewTransition();b.addEvent("start:once",this.bound("onPopTransitionStart"));b.addEvent("complete:once",this.bound("onPopTransitionComplete"));b.leave(d.getView(),c.getView(),this.view);return this},popViewControllerUntil:function(e){if(this._animating){return this}var a=this.getChildViewControllers();if(a.length<=1){return this}var d=this.getChildViewControllerIndex(e);if(d>-1){for(var c=a.length-2;c>d;c--){var b=this.getChildViewControllerAt(c);b.viewWillLeave();b.viewDidLeave();b.removeFromParentViewController();b.destroy();b=null}}this.popViewController();return this},onPopTransitionStart:function(c){var a=this.getChildViewControllers();var d=a.getLastItemAtOffset(1);var b=a.getLastItemAtOffset(0);d.viewWillEnter();b.viewWillLeave()},onPopTransitionComplete:function(c){var a=this.getChildViewControllers();var b=a.getLastItemAtOffset(0);var d=a.getLastItemAtOffset(1);d.viewDidEnter();b.viewDidLeave();b.removeFromParentViewController();this.didPopViewController(b);b.destroy();b=null;this._animating=false},getTopViewController:function(){return this.getChildViewControllers().getLast()},willAddChildViewController:function(a){this.parent(a);a.setViewControllerStack(this)},willRemoveChildViewController:function(a){this.parent(a);a.setViewControllerStack(null)},willPushViewController:function(a){},didPushViewController:function(a){},willPopViewController:function(a){},didPopViewController:function(a){}});Class.refactor(Moobile.ViewController,{_viewControllerStack:null,setViewControllerStack:function(a){if(this._viewControllerStack===a){return this}this.parentViewControllerStackWillChange(a);this._viewControllerStack=a;this.parentViewControllerStackDidChange(a);if(this instanceof Moobile.ViewControllerStack){return this}var b=function(c){return !(c instanceof Moobile.ViewControllerStack)};this.getChildViewControllers().filter(b).invoke("setViewControllerStack",a);return this},getViewControllerStack:function(){return this._viewControllerStack},parentViewControllerStackWillChange:function(a){},parentViewControllerStackDidChange:function(a){},willAddChildViewController:function(a){this.previous(a);a.setViewControllerStack(this._viewControllerStack)},willRemoveChildViewController:function(a){this.previous(a);a.setViewControllerStack(null)}});Moobile.ViewControllerStack.Navigation=new Class({Extends:Moobile.ViewControllerStack,options:{backButton:true,backButtonLabel:"Back"},willAddChildViewController:function(e){this.parent(e);var a=e.getView();var d=a.getChildComponent("navigation-bar");if(d===null){d=new Moobile.NavigationBar(null,null,"navigation-bar");a.addChildComponent(d,"header")}if(e.isModal()||this.childViewControllers.length===0){return this}if(this.options.backButton){var b=this.topViewController.getTitle()||this.options.backButtonLabel;if(b){var c=new Moobile.Button(null,null,"back");c.setStyle("back");c.setLabel(b);c.addEvent("tap",this.bound("_onBackButtonTap"));d.getItem().addLeftButton(c)}}},didAddChildViewController:function(b){this.parent(b);var a=b.getView().getChildComponent("navigation-bar");if(a===null){return this}var c=b.getTitle();if(c){a.getItem().setTitle(c)}},_onBackButtonTap:function(a){this.popViewController()}});Moobile.ViewControllerPanel=new Class({Extends:Moobile.ViewController,_mainViewController:null,_sideViewController:null,loadView:function(){this.view=new Moobile.ViewPanel()},setMainViewController:function(b){if(this._mainViewController){this._mainViewController.destroy();this._mainViewController=null}var a=b.getView();if(a){this.view.addChildComponentInside(a,this.view.getMainPanel())}viewController.setViewControllerPanel(this);this.addChildViewController(b);this._mainViewController=b;return this},getMainViewController:function(){return this._mainViewController},setSideViewController:function(b){if(this._sideViewController){this._sideViewController.destroy();this._sideViewController=null}var a=b.getView();if(a){this.view.addChildComponentInside(a,this.view.getSidePanel())}viewController.setViewControllerPanel(this);this.addChildViewController(b);this._sideViewController=_sideViewController;return this},getSideViewController:function(){return this._sideViewController}});Class.refactor(Moobile.ViewController,{_viewControllerPanel:null,setViewControllerPanel:function(a){this._viewControllerPanel=a;return this},getViewControllerPanel:function(a){return this._viewControllerPanel},willAddChildViewController:function(a){this.previous(a);if(a.getViewControllerPanel()===null){a.setViewControllerPanel(this._viewControllerPanel)}},willRemoveChildViewController:function(a){this.previous(a);a.setViewControllerPanel(null)}});if(!window.Moobile){window.Moobile={}}Moobile.ViewTransition=new Class({Implements:[Events,Options,Class.Binds],initialize:function(a){this.setOptions(a);return this},enter:function(a,d,c,b){if(d){d.disableTouch()}a.show();a.disableTouch();this.fireEvent("start");if(b){this.firstAnimation(a,c)}else{this.enterAnimation(a,d,c)}return this},leave:function(a,c,b){a.show();a.disableTouch();c.disableTouch();this.fireEvent("start");this.leaveAnimation(a,c,b);return this},didEnterFirst:function(a,b){a.enableTouch();this.fireEvent("complete");return this},didEnter:function(a,c,b){c.hide();c.enableTouch();a.enableTouch();this.fireEvent("complete");return this},didLeave:function(a,c,b){c.hide();c.enableTouch();a.enableTouch();this.fireEvent("complete");return this},firstAnimation:function(a,b){throw new Error("You must override this method")},enterAnimation:function(a,c,b){throw new Error("You must override this method")},leaveAnimation:function(a,c,b){throw new Error("You must override this method")}});Moobile.ViewTransition.Slide=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){a.addClass("first");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("first");d.removeClass("transition-view-to-show");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(a);f.setAnimationClass("transition-slide-enter");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-slide-enter");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didLeave(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-slide-leave");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Cover=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-enter");a.addClass("first")}.bind(this);var c=function(){a.removeClass("transition-cover-enter");a.removeClass("first");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(d);f.setAnimationClass("transition-view-to-show");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){e.addClass("transition-cover-perspective");a.addClass("transition-cover-enter");f.addClass("transition-view-to-hide")}.bind(this);var c=function(){e.removeClass("transition-cover-perspective");a.removeClass("transition-cover-enter");f.removeClass("transition-view-to-hide");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(d);g.setAnimationClass("transition-view-to-show");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-cover-leave");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-cover-leave");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(f);g.setAnimationClass("transition-view-to-hide");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Cover.Box=new Class({Extends:Moobile.ViewTransition,overlay:null,viewToShowWrapper:null,firstAnimation:function(a,b){throw new Error("You cannot use this transition for the first view of a stack")},enterAnimation:function(b,d,c){var a=c.getContentElement();document.id(c).addEvent("animationend:once",function(f){f.stop();a.removeClass("transition-cover-box-enter");d.removeClass("transition-view-to-hide");b.removeClass("transition-view-to-show");this.didEnter(b,d,c)}.bind(this));this.overlay=new Moobile.Overlay();this.overlay.hide();this.overlay.showAnimated();d.addChildComponent(this.overlay,"header");this.viewToShowWrapper=new Moobile.View();this.viewToShowWrapper.addChildComponent(b);this.viewToShowWrapper.addClass("transition-cover-box-foreground-view-wrapper");c.addChildComponent(this.viewToShowWrapper);a.addClass("transition-cover-box-enter");d.addClass("transition-cover-box-background-view");b.addClass("transition-cover-box-foreground-view");d.addClass("transition-view-to-hide");b.addClass("transition-view-to-show")},leaveAnimation:function(b,d,c){var a=c.getContentElement();document.id(c).addEvent("animationend:once",function(f){f.stop();a.removeClass("transition-cover-box-leave");d.removeClass("transition-cover-box-background-view");b.removeClass("transition-cover-box-foreground-view");d.removeClass("transition-view-to-hide");b.removeClass("transition-view-to-show");d.removeFromParentComponent();this.didLeave(b,d,c);this.viewToShowWrapper.removeFromParentComponent();this.viewToShowWrapper.destroy();this.viewToShowWrapper=null;this.overlay.removeFromParentComponent();this.overlay.destroy();this.overlay=null}.bind(this));this.overlay.hideAnimated();a.addClass("transition-cover-box-leave");d.addClass("transition-view-to-hide");b.addClass("transition-view-to-show")}});Moobile.ViewTransition.Cover.Page=new Class({Extends:Moobile.ViewTransition,overlay:null,firstAnimation:function(a,b){throw new Error("You cannot use this transition for the first view of a stack")},enterAnimation:function(b,d,c){var a=c.getContentElement();document.id(c).addEvent("animationend:once",function(f){f.stop();a.removeClass("transition-cover-page-enter");d.removeClass("transition-view-to-hide");b.removeClass("transition-view-to-show");this.didEnter(b,d,c)}.bind(this));this.overlay=new Moobile.Overlay();this.overlay.hide();this.overlay.showAnimated();d.addChildComponent(this.overlay,"header");a.addClass("transition-cover-page-enter");d.addClass("transition-cover-page-background-view");b.addClass("transition-cover-page-foreground-view");d.addClass("transition-view-to-hide");b.addClass("transition-view-to-show")},leaveAnimation:function(b,d,c){var a=c.getContentElement();document.id(c).addEvent("animationend:once",function(f){f.stop();a.removeClass("transition-cover-page-leave");b.removeClass("transition-cover-page-background-view");d.removeClass("transition-cover-page-foreground-view");d.removeClass("transition-view-to-hide");b.removeClass("transition-view-to-show");this.didLeave(b,d,c);this.overlay.removeFromParentComponent();this.overlay.destroy();this.overlay=null}.bind(this));this.overlay.hideAnimated();a.addClass("transition-cover-page-leave");d.addClass("transition-view-to-hide");b.addClass("transition-view-to-show")}});Moobile.ViewTransition.Cubic=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){e.addClass("transition-cubic-perspective");a.addClass("first");d.addClass("transition-view-to-show")}.bind(this);var c=function(){e.removeClass("transition-cubic-perspective");a.removeClass("first");d.removeClass("transition-view-to-show");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(a);f.setAnimationClass("transition-cubic-enter");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){e.addClass("transition-cubic-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){e.removeClass("transition-cubic-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-cubic-enter");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){e.addClass("transition-cubic-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){e.removeClass("transition-cubic-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didLeave(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-cubic-leave");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Fade=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){a.addClass("transition-fade-enter");a.addClass("first")}.bind(this);var c=function(){a.removeClass("transition-fade-enter");a.removeClass("first");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(d);f.setAnimationClass("transition-view-to-show");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-fade-enter");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-fade-enter");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(d);g.setAnimationClass("transition-view-to-show");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){a.addClass("transition-fade-leave");d.addClass("transition-view-to-show")}.bind(this);var c=function(){a.removeClass("transition-fade-leave");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(f);g.setAnimationClass("transition-view-to-hide");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.Flip=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(d,e){var a=e.getContentElement();var b=function(){e.addClass("transition-flip-perspective");a.addClass("first");d.addClass("transition-view-to-show")}.bind(this);var c=function(){e.removeClass("transition-flip-perspective");a.removeClass("first");d.removeClass("transition-view-to-show");this.didEnterFirst(d,e)}.bind(this);var f=new Moobile.Animation(a);f.setAnimationClass("transition-flip-enter");f.addEvent("start",b);f.addEvent("end",c);f.start()},enterAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){e.addClass("transition-flip-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){e.removeClass("transition-flip-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didEnter(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-flip-enter");g.addEvent("start",b);g.addEvent("end",c);g.start()},leaveAnimation:function(d,f,e){var a=e.getContentElement();var b=function(){e.addClass("transition-flip-perspective");f.addClass("transition-view-to-hide");d.addClass("transition-view-to-show")}.bind(this);var c=function(){e.removeClass("transition-flip-perspective");f.removeClass("transition-view-to-hide");d.removeClass("transition-view-to-show");this.didLeave(d,f,e)}.bind(this);var g=new Moobile.Animation(a);g.setAnimationClass("transition-flip-leave");g.addEvent("start",b);g.addEvent("end",c);g.start()}});Moobile.ViewTransition.None=new Class({Extends:Moobile.ViewTransition,firstAnimation:function(a,b){this.didEnterFirst(a,b)},enterAnimation:function(a,c,b){this.didEnter(a,c,b)},leaveAnimation:function(a,c,b){this.didLeave(a,c,b)}});if(!window.$moobile){window.$moobile={}}Moobile.Window=new Class({Extends:Moobile.View,willBuild:function(){this.parent();this.element.set("class","window");window.addEvent("load",this.bound("_onWindowLoad"));window.addEvent("rotate",this.bound("_onWindowRotate"))},didBuild:function(){this.parent();this.contentElement.addClass("window-content")},destroy:function(){window.removeEvent("load",this.bound("_onWindowLoad"));window.removeEvent("rotate",this.bound("_onWindowRotate"));this.parent()},didAddChildComponent:function(a){this.parent(a);a.setWindow(this)},didRemoveChildComponent:function(a){this.parent(a);a.setWindow(null)},_onWindowLoad:function(a){(function(){window.scrollTo(0,1)}).delay(250)},_onWindowRotate:function(a){(function(){window.scrollTo(0,1)}).delay(250)}});Moobile.WindowController=new Class({Extends:Moobile.ViewController,_rootViewController:null,loadView:function(){var a=document.id("window");if(a===null){a=new Element("div");a.inject(document.body)}this.view=new Moobile.Window(a)},setRootViewController:function(a){if(this._rootViewController){this._rootViewController.destroy();this._rootViewController=null}if(a){this.addChildViewController(a)}this._rootViewController=a;return this},getRootViewController:function(){return this._rootViewController}});(function(){var a=function(c){if(!c.target||c.target.tagName.toLowerCase()!="select"){c.preventDefault()}};var b;Element.defineCustomEvent("touch",{base:"touchend",condition:function(c){if(b||c.targetTouches.length!=0){return false}var e=c.changedTouches[0],d=document.elementFromPoint(e.clientX,e.clientY);do{if(d==this){return true}}while(d&&(d=d.parentNode));return false},onSetup:function(){this.addEvent("touchstart",a)},onTeardown:function(){this.removeEvent("touchstart",a)},onEnable:function(){b=false},onDisable:function(){b=true}})})();if(Browser.Features.iOSTouch){(function(){var a="click";delete Element.NativeEvents[a];Element.defineCustomEvent(a,{base:"touch"})})()}if(Browser.Features.Touch){(function(){var a="pinch",d=a+":threshold",c,e;var b={touchstart:function(f){if(f.targetTouches.length==2){e=true}},touchmove:function(g){if(c||!e){return}g.preventDefault();var f=this.retrieve(d,0.5);if(g.scale<(1+f)&&g.scale>(1-f)){return}e=false;g.pinch=(g.scale>1)?"in":"out";this.fireEvent(a,g)}};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(b)},onTeardown:function(){this.removeEvents(b)},onEnable:function(){c=false},onDisable:function(){c=true}})})()}(function(){var a="swipe",c=a+":distance",f=a+":cancelVertical",g=50;var b={},e,d;var h=function(){d=false};var i={touchstart:function(j){if(j.touches.length>1){return}var k=j.touches[0];d=true;b={x:k.pageX,y:k.pageY}},touchmove:function(l){if(e||!d){return}var p=l.changedTouches[0],j={x:p.pageX,y:p.pageY};if(this.retrieve(f)&&Math.abs(b.y-j.y)>10){d=false;return}var o=this.retrieve(c,g),n=j.x-b.x,m=n<-o,k=n>o;if(!k&&!m){return}l.preventDefault();d=false;l.direction=(m?"left":"right");l.start=b;l.end=j;this.fireEvent(a,l)},touchend:h,touchcancel:h};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(i)},onTeardown:function(){this.removeEvents(i)},onEnable:function(){e=false},onDisable:function(){e=true;h()}})})();(function(){var b="touchhold",e=b+":delay",d,f;var a=function(g){clearTimeout(f)};var c={touchstart:function(g){if(g.touches.length>1){a();return}f=(function(){this.fireEvent(b,g)}).delay(this.retrieve(e)||750,this)},touchmove:a,touchcancel:a,touchend:a};Element.defineCustomEvent(b,{onSetup:function(){this.addEvents(c)},onTeardown:function(){this.removeEvents(c)},onEnable:function(){d=false},onDisable:function(){d=true;a()}})})();Class.Instantiate=function(a,b){var c=function(d){if(d.getInstanceOf&&d.getInstanceOf(a)){return}new a(d,b)};return function(d){d.each(c)}};(function(){var b={storage:{},store:function(c,d){this.storage[c]=d},retrieve:function(c){return this.storage[c]||null}};Class.Singleton=function(){this.$className=String.uniqueID()};Class.Singleton.prototype.check=function(d){if(!d){d=b}var c=d.retrieve("single:"+this.$className);if(!c){d.store("single:"+this.$className,this)}return c};var a=function(c){var d=c.prototype.$className;return d?this.retrieve("single:"+d):null};if(("Element" in this)&&Element.implement){Element.implement({getInstanceOf:a})}Class.getInstanceOf=a.bind(b)}).call(this);